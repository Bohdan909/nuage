<!DOCTYPE html>

<html class="no-js">
	<head>
		<meta charset="utf-8" />
		<title>Nuage</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" /> 
		<meta name="format-detection" content="telephone=no">
		<meta name="format-detection" content="address=no">
		<link rel="icon" type="image/vnd.microsoft.icon" href="favicon.ico" />
		<link rel="shortcut icon" type="image/x-icon" href="favicon.ico"  />
		
        <link type="text/css" rel="stylesheet" href="css/perfect-scrollbar.min.css" />
        <link type="text/css" rel="stylesheet" href="css/main.css" />
	</head>
	
	<body>
		<div class="main">
			<div class="page page-mission">
				
				<!-- Video -->
				<div class="mission-video-wrap">
					<div class="mission-video" data-vide-options="autoplay: false" data-vide-bg="mp4: video/video.mp4"></div>

					<div class="mission-video-play">
						<div class="video-name">открыть видеоролик</div>
						<div class="btn-play"></div>
					</div>

					<div class="mission-video-close"></div>
				</div>

				<!-- Header -->
				<header id="header"> 
					<nav class="menu">
						<a href="index.htm" class="logo">
							<img src="images/logo.png" alt="logo">
						</a>
							
						<ul>
							<li><a href="advantages.htm">преимущества</a></li>
							<li><a href="assortment.htm">ассортимент</a></li>
							<li class="active"><a href="mission.htm">миссия</a></li>
							<li><a href="faq.htm">вопрос-ответ</a></li>
							<li><a href="buy.htm">где купить?</a></li>
							<li><a href="consultation.htm">консультация</a></li>
						</ul>

						<button class="btn-menu">
							<i></i>
							<i></i>
							<i></i>
						</button>
					</nav>
				</header><!-- / Header -->
				
				<!-- Content -->
				<div id="content">	
					
					<div class="socket">
						<div class="mission-column to-right">
							<div class="video-calibrate"></div>
							<!-- <div class="video-block-wrap">
								<div class="video-block-shadow"></div>
								<div class="video-block">
									<div class="video-name">открыть видеоролик</div>
									<div class="btn-play"></div>
									<div class="video" data-vide-options="autoplay: false" data-vide-bg="mp4: video/video.mp4, poster: images/video.png">
										
									</div>
								</div>
							</div> -->

							<div class="strip animate-fade"></div>
						</div>

						<div class="mission-column to-left">
							<div class="mission-text">
								<section>
									<div class="title-3 animate-slide">
										Самое дорогое - <br> женское здоровье
									</div>
									<p class="animate-slide">
										Мы стали тщательно продумывать покупки продуктов для наших семей, отдавая предпочтение натуральным. Мы ищем на полках магазинов безопасную, но эффективную бытовую химию и косметику.
									</p>
									<p class="animate-slide">
										Несколько сотен прокладок используются женщиной за год ее жизни, тысячи женщин по всему миру не задумываются о том, что средства гигиены непосредственно могут влиять на самое дорогое – женское здоровье.
									</p>
								</section>
							</div>
							<div class="mission-text-slider-wrap">
								<section>
									<span class="animate-slide">
										Разрабатывая прокладки Nuage мы взяли за основу :
									</span>

									<div class="mission-text-slider animate-slide">
										<div id="tab-1" class="tab-pane active">
											<div class="title-3">
												«Аптечное» качество
											</div>
											<p>
												Высокое «аптечное» качество продукции.
											</p>
										</div>

										<div id="tab-2" class="tab-pane">
											<div class="title-3">
												Медицинские компетенции
											</div>
											<p>
												Отсутствие небезопасных материалов и красителей.
											</p>
										</div>

										<div id="tab-3" class="tab-pane">
											<div class="title-3">
												Максимальное соответствие
											</div>
											<p>
												Концепции здорового образа жизни.
											</p>
										</div>

										<div id="tab-4" class="tab-pane">
											<div class="title-3">
												Максимальный комфорт
											</div>
											<p>
												Для женщин любого возраста и любых потребностей.
											</p>
										</div>
									</div>
									<ul class="tabs mission-tabs animate-slide">
										<li class="active tab">
											<span data-tab="tab-1">01</span>
										</li>
										<li class="tab">
											<span data-tab="tab-2">02</span>
										</li>
										<li class="tab">
											<span data-tab="tab-3">03</span>
										</li>
										<li class="tab">
											<span data-tab="tab-4">04</span>
										</li>
									</ul>
								</section>
							</div>
						</div>

					</div>

					<ul class="cubes cubes-a cubes-b">
							<li>
								<div>
									<span class="face-1"></span>
									<span class="face-2"></span>
									<span class="face-3"></span>
								</div>
							</li>
							<li>
								<div>
									<span class="face-1"></span>
									<span class="face-2"></span>
									<span class="face-3"></span>
								</div>
							</li>
							<li>
								<div>
									<span class="face-1"></span>
									<span class="face-2"></span>
									<span class="face-3"></span>
								</div>
							</li>
						</ul>
					
				</div><!-- / Content -->

			</div>
		</div><!-- / Main -->


		<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>

		<script src="./js/modernizr-custom.js"></script> 
		<script src="./js/jquery.mousewheel.min.js"></script>
        <script src="./js/perfect-scrollbar.jquery.min.js"></script>
        <script src="./js/jquery.vide.js"></script>
		<script src="./js/scripts.js"></script> 



		<script>
			window.addEventListener("load", function(){

				// Video
				let videoBlock = document.querySelector(".video-block-wrap");
				let video   = document.querySelector(".mission-video video");
				let btnPlay = document.querySelector(".btn-play");
				let btnName = document.querySelector(".video-name");
				
				// video.setAttribute("controls", "false");
				setAttributes(video, {"autoplay": "true", "loop": "true", "controls": "false"});

				function setAttributes(el, options) {
				    Object.keys(options).forEach(function(attr) {
				    	el.setAttribute(attr, options[attr]);
				    });
				}
				
				// videoBlock.addEventListener("mouseover", function(){
				// 	checkPlay("hover", "leave");
				// });

				// videoBlock.addEventListener("mouseleave", function(){
				// 	checkPlay("leave", "hover");
				// });

				// videoBlock.addEventListener("click", function(){
				// 	video.play();
				// 	video.controls = false;

				// 	setTimeout(function(){
				// 		videoBlock.classList.add("play");
				// 		videoBlock.classList.remove("leave");
				// 		videoBlock.classList.remove("hover");
				// 	}, 200);
					
				// 	btnPlay.classList.add("hide");
				// 	btnName.classList.add("hide");
				// });

				// function checkPlay(classNameA, classNameU){
				// 	if (!videoBlock.classList.contains("play")){
				// 		videoBlock.classList.add(classNameA);
				// 		videoBlock.classList.remove(classNameU);
				// 	}
				// };


				const timeAnim = 5000;
				const timeAnimBack = 600;
				let touch = document.querySelector("html").classList.contains("touchevents");
				let radius = "155px";
				let scrollTop = $(window).scrollTop();
				let videoWrap  = document.querySelector(".mission-video-wrap");
				let videoPlay  = document.querySelector(".mission-video-play");
				let videoCal   = document.querySelector(".video-calibrate");
				let videoCloseBtn = document.querySelector(".mission-video-close");
				let topPosPlay, leftPosPlay, topPos, leftPos, timer;
				
				videoWrap.addEventListener("mouseover", function(){
					window.scrollTo(0, 0);
					if (!touch) timer = setTimeout(videoOpen, 600);
				});

				videoWrap.addEventListener("touchstart", function(){
					window.scrollTo(0, 0);
					scrollDisable();
					setTimeout(videoOpen, 200);
				});

				$(".title-3").text(scrollTop);

				videoWrap.addEventListener("mouseleave", function(){
					clearTimeout(timer);
				});

				videoCloseBtn.addEventListener("click", function(){
					setTimeout(videoClose, 200);
				});

				setCirclePos(radius);

				function scrollDisable(){
					document.addEventListener('touchstart', this.touchstart);
					document.addEventListener('touchmove', this.touchmove);

					function touchstart(e){
					    e.preventDefault()
					}

					function touchmove(e){
					    e.preventDefault()
					}
				}

				function setCirclePos(rad){
					topPosPlay  = videoCal.getBoundingClientRect().top + scrollTop;
					leftPosPlay = videoCal.getBoundingClientRect().left;
					topPos  = topPosPlay + 155;
					leftPos = leftPosPlay + 155;
	
					// if (window.innerWidth < 359) rad = "140px";

					videoWrap.setAttribute("style","clip-path:circle("+rad+" at "+leftPos+"px"+" "+topPos+"px);");
					videoPlay.setAttribute("style","top:"+topPosPlay+"px; left:"+leftPosPlay+"px;");
				}

				function videoOpen(){
					console.log("video Open");
					setCirclePos("150%");
					video.play();
					
					videoWrap.classList.add("open");
				}

				function videoClose(){
					console.log("video Close");
					setCirclePos(radius);
					videoWrap.classList.remove("open");
				}

				window.addEventListener("resize", function(){
		
					if (!videoWrap.classList.contains("open")){
						setCirclePos(radius);
						videoPlay.classList.remove("hide");
					} 
				});
			})
				
		</script>

		
		<!-- Live Reload -->
		<script src="http://localhost:35729/livereload.js"></script>

	</body>
</html>
