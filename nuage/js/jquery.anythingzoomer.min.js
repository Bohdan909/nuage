!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";return e.anythingZoomer=function(a,n){var o,l,t,s=this;s.$wrap=e(a),s.wrap=a,s.$wrap.data("zoomer",s),s.version="2.2.6",s.init=function(){s.options=l=e.extend({},e.anythingZoomer.defaultOptions,n),o=e.anythingZoomer.classNames,s.state=!0,s.enabled=!0,s.hovered=!1,s.$wrap.addClass(o.wrap).wrapInner('<span class="'+o.wrapInner+'"/>'),s.$inner=s.$wrap.find("."+o.wrapInner),s.$small=s.$wrap.find("."+l.smallArea),s.$large=s.$wrap.find("."+l.largeArea),s.update(),s.$large.addClass(o.large),s.$small.addClass(o.small),s.$inner.bind("mouseenter"+o.namespace,function(){s.enabled&&(s.saved=s.enabled,s.hovered=!0,l.delay?(clearTimeout(s.delay),s.enabled=!1,s.delay=setTimeout(function(){s.enabled=s.saved,s.position.type="mousemove",s.$inner.trigger(s.position),s.reveal()},l.delay)):s.reveal())}).bind("mouseleave"+o.namespace,function(){s.hovered=!1,s.enabled&&(l.delay&&(clearTimeout(s.delay),s.enabled=s.saved),s.state&&s.enabled&&(s.timer=setTimeout(function(){s.$zoom.hasClass(o.windowed)&&s.hideZoom(!0)},200)))}).bind("mousemove"+o.namespace,function(e){if(s.enabled&&(s.position=e,s.hovered&&s.state&&s.enabled)){clearTimeout(s.timer);var a=s.$small.offset();s.zoomAt(e.pageX-a.left,e.pageY-a.top,null,!0)}}).bind(l.switchEvent+(""!==l.switchEvent?o.namespace:""),function(){s.enabled&&(s.state?s.showLarge():s.showSmall())}),s.showSmall(),e.each("initialized zoom unzoom".split(" "),function(a,n){e.isFunction(l[n])&&s.$wrap.bind(n,l[n])}),s.initialized=!0,s.$wrap.trigger("initialized",s)},s.reveal=function(){s.enabled=s.saved,s.state&&s.enabled&&(s.$zoom.stop(!0,!0).fadeIn(l.speed),l.overlay&&s.$overlay.addClass(o.overlay),s.$smInner.addClass(o.hovered),s.$wrap.trigger("zoom",s))},s.update=function(){s.initialized&&s.showSmall(),s.$smInner=s.$small.find("."+o.smallInner).length?s.$small.find("."+o.smallInner):s.$small.wrapInner('<span class="'+o.smallInner+'"/>').find("."+o.smallInner),s.$small.find("."+o.overly).remove(),l.clone&&(t=s.$smInner.clone().removeAttr("id").removeClass(o.smallInner).addClass(o.largeInner),s.$large.length?s.$large.html(t.html()):(t.wrap('<div class="'+l.largeArea+'">'),s.$small.after(t.parent()),s.$large=s.$wrap.find("."+l.largeArea))),s.$lgInner=s.$large.find("."+o.largeInner).length?s.$large.find("."+o.largeInner):s.$large.wrapInner('<span class="'+o.largeInner+'"/>').find("."+o.largeInner),s.$wrap.find("."+o.zoom).length||(s.$large.wrap('<div class="'+o.zoom+'"/>'),s.$zoom=s.$wrap.find("."+o.zoom)),l.edit&&!s.edit&&(s.edit=e('<span class="'+o.edit+'"></span>').appendTo(s.$zoom)),s.$zoom.show(),s.largeDim=[s.$lgInner.children().width(),Math.max(s.$lgInner.height(),s.$lgInner.children().height())],s.zoomDim=s.last=[s.$zoom.width(),s.$zoom.height()],s.$zoom.hide(),s.smallDim=[s.$smInner.children().width(),s.$small.height()],s.$overlay=e('<div class="'+o.overly+'" style="position:absolute;left:0;top:0;" />').prependTo(s.$small),s.ratio=[s.largeDim[0]/(s.smallDim[0]||1),s.largeDim[1]/(s.smallDim[1]||1)],s.$inner.add(s.$overlay).css({width:s.smallDim[0],height:s.smallDim[1]})},s.showSmall=function(){s.state=!0,s.$small.show(),s.$zoom.removeClass(o.expanded).addClass(o.windowed+" "+o.zoom).css({width:s.zoomDim[0],height:s.zoomDim[1]}),s.$inner.css({width:s.smallDim[0],height:s.smallDim[1]})},s.showLarge=function(){s.state=!1,s.$small.hide(),s.$zoom.stop(!0,!0).fadeIn(l.speed).addClass(o.expanded).removeClass(o.windowed+" "+o.zoom).css({height:"auto",width:"auto"}),s.$inner.css({width:s.largeDim[0],height:s.largeDim[1]}),s.$large.css({left:0,top:0,width:s.largeDim[0],height:s.largeDim[1]})},s.setTarget=function(a,n,t){var r,i=0,d=0;clearTimeout(s.timer),s.$zoom.hasClass(o.windowed)||s.showSmall(),isNaN(a)||isNaN(n)?"string"==typeof a&&e(a).length&&(i=(r=e(a)).position().left+r.width()/2+(n&&n[0]||0),d=r.position().top+r.height()/2+(n&&n[1]||0)):(i=parseInt(a,10),d=parseInt(n,10)),s.zoomAt(i,d,t),l.overlay&&s.$overlay.addClass(o.overlay),s.$smInner.addClass(o.hovered),s.$wrap.trigger("zoom",s)},s.zoomAt=function(e,a,n,o){var t=n&&n[0]||s.last[0],r=n&&(n[1]||n[0])||s.last[1],i=t/2,d=r/2,m=l.edge||(0===l.edge?0:.66*i),h=l.edge||(0===l.edge?0:.66*d),p=parseInt(s.$inner.css("margin-left"),10)||s.$inner.position().left||0;return s.last=[t,r],s.current=[e,a],l.edit&&s.edit.html(Math.round(e)+", "+Math.round(a)),e<-m||e>s.smallDim[0]+m||a<-h||a>s.smallDim[1]+h?void s.hideZoom(o):(s.$zoom.stop(!0,!0).fadeIn(l.speed),s.$zoom.css({left:e-i+p,top:a-d,width:t,height:r}),void s.$large.css({left:-(e-l.offsetX-i/2)*s.ratio[0],top:-(a-l.offsetY-d/2)*s.ratio[1]}))},s.hideZoom=function(e){e&&s.$smInner.hasClass(o.hovered)&&s.$wrap.trigger("unzoom",s),s.last=s.zoomDim,s.$zoom.stop(!0,!0).fadeOut(l.speed),s.$overlay.removeClass(o.overlay),s.$smInner.removeClass(o.hovered),s.lastKey=null},s.setEnabled=function(e){if(s.enabled=e,e){var a=s.$small.offset();s.zoomAt(s.position.pageX-a.left,s.position.pageY-a.top,null,!0)}else s.showSmall(),s.hideZoom(),s.hovered=!1},s.init()},e.anythingZoomer.classNames={namespace:".anythingZoomer",wrap:"az-wrap",wrapInner:"az-wrap-inner",large:"az-large",largeInner:"az-large-inner",small:"az-small",smallInner:"az-small-inner",overlay:"az-overlay",overly:"az-overly",hovered:"az-hovered",zoom:"az-zoom",windowed:"az-windowed",expanded:"az-expanded",edit:"az-coords"},e.anythingZoomer.defaultOptions={smallArea:"small",largeArea:"large",clone:!1,overlay:!1,speed:100,edge:30,offsetX:0,offsetY:0,switchEvent:"dblclick",delay:0,edit:!1},e.fn.anythingZoomer=function(a,n,o,l){return this.each(function(){var t=e(this).data("zoomer");/object|undefined/.test(typeof a)?t?t.update():new e.anythingZoomer(this,a):!t||"string"!=typeof a&&(isNaN(a)||isNaN(n))||(/(en|dis)able/.test(a)?t.setEnabled("enable"===a):t.setTarget(a,n,o,l))})},e.fn.getAnythingZoomer=function(){return this.data("zoomer")},e.anythingzoomer});
//# sourceMappingURL=jquery.anythingzoomer.min.js.map
