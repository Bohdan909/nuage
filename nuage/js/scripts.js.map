{"version":3,"sources":["scripts.js"],"names":["document","documentElement","className","replace","$","ready","html","querySelector","pageScroll","classList","contains","mobile","window","matchMedia","matches","blockWidth","fontSize","lineLength","console","log","querySelectorAll","forEach","block","resultHTML","text","innerText","textContent","resultArr","parentNode","innerWidth","blockWrap","findParent","offsetWidth","parseInt","getComputedStyle","getPropertyValue","maxLength","line","length","split","word","push","join","linesWrap","innerHTML","setLines","addEventListener","location","reload","formWrap","mesConsult","copyRight","on","e","removeClass","addClass","hide","preventDefault","show","$body","event","target","tagName","stopPropagation","add","setTimeout","remove","$like","$likeBg","Array","prototype","call","likeItem","this","item","beginElement","assortFilter","surface","absorbtion","quantity","filterArray","surfaceTypes","grid","soft","absorbLevels","one","two","three","four","five","quantities","six","eight","ten","twenty","save","array","localStorage","setItem","load","lsValue","getItem","apply","arrayDiff","array1","array2","filter","i","indexOf","arrayIntersect","result","slice","mergeFilters","tempArray","exist1time","exist2times","exist3times","concat","sort","offset","iter","reset","$slider","slick","removeItem","indexesArray","index","inArray","attr","option","subtract","noresultCallback","noOptionsSelected","body","$filterWrap","$dropBtn","$filterBtnText","$dropBlock","$dropInner","dropClose","setAttribute","height","offsetHeight","allFilterOptions","filterOption","clearAssortmentFilter","closest","$fbPage","buttonPlus","$point","$text","textHeight","toggle","btnScheme","pointClone","changeClone","clone","indexDetect","activePane","list","children","lastPoint","indexActive","changeMissionTab","missinTabsParent","missionTextTabs","activeTabIndex","correspondingTabId","getAttribute","getElementById","btn","pane","point","pointActive","missionTabsIntervalID","setInterval","tabs","tabClick","currentTarget","clearInterval","tabElements","tabElement","targetTab","animateTabLine","activePaneId","contentPanes","parentElement","activeTab","lineWidth","getBoundingClientRect","left","leftValue","style","width","tab","replaceWithPaths","setDash","ffItem","feedback","mapFilterBtn","mapFilterWrap","mapFilterBtnSpan","textTgl","pointAct","findPointAct","pointWidth","pointPos","offsetLeft","pointBg","setBg","changeBg","pnt","pos","prodWrap","prodZoom","zoomImg","mouseX","mouseY","offsetX","offsetY","zoomPosX","zoomPosY","showedImg","zoomSpeed","zoomFunction","scale","pageX","pageY","top","styles","cursor","blockTarget","btnCursorLock","ElementCursor","setCursor","mousedown","updateCursor","dragCursor","removeCursor","hideCursor","mousemove","css","mouseenter","mouseleave","scrollBar","windowSize","resize","$object","$scheme","rotate3d","source","count","auto","$bgItem","find","$slideItems","$slidesCount","$indRev","$indRevItem","indArr","setSlideVisualAttributes","slideId","figIndex","currentSlideElement","$slides","get","currentSlideSlickIndex","data","eq","transform","displayCurrentSlideNumber","$curSlide","slideIndex","$sliderDesc","bind","getCurrentSlickSlideFromStorage","currentSlideIndex","lsCurrentSlideIndex","displayFilterNoResults","slideCount","currentSlide","centerMode","infinite","slidesToShow","slidesToScroll","speed","focusOnSelect","swipe","useTransform","touchMove","draggable","lazyLoad","responsive","breakpoint","settings","fade","elem","jqElem","dropsElem","allDrops","drop","video","videoWrapper","videoContent","videoWrap","videoCloseBtn","siteHeader","videoCubes","hideSiteControls","opacity","handleVideoTouch","callback","videoClose","muted","pause","removeEventListener","executePageSpecificScript","blockId","animateOpen","animateClose","checkSliderEdge","parent","hasClass","nextSlide","play","filterPar","controls","readyState","videoElem","soundMuted","currentTime","movingMenuUnderline","menuListElem","playMenuUnderlineAnimation","currentBlockId","currentNavElement","childSelector","classToRemove","child","clearClassForChildren","navElemOffset","Page","pageId","title","id","pageElement","setLoaded","loaded","clearNext","clearPrev","unload","setNext","setPrev","currentToPrev","nextToCurrent","currentToNext","prevToCurrent","mainElem","keysPrev","38","33","keysNext","40","34","lastScrollTime","currentHashtag","hash","substr","scrollManager","pagesArray","currentId","pageIndicatorId","pageIndicator","currentPage","previousPage","nextPage","currentPageIndex","displayCurrentPageTitle","displayPageByIndex","displayPage","setCurrentPageByIndex","href","setCurrentPage","clearLoadedState","page","init","scrollToNextPage","scrollToPrevPage","mq","WidthChange","lastURL","el","capture","dir","swipeType","startX","startY","distX","distY","startTime","touchsurface","handletouch","onkeydown","customScrollKeysHandler","HashChangeEvent","URL","Object","defineProperty","enumerable","configurable","value","onhashchange","hashUrlChangeHandler","addWheelListener","customScrollWheelHandler","scrollBlocks","scrollBlock","customScrollForScrollable","customScrollTouchHandler","evt","phase","swipetype","distance","touchobj","changedTouches","dist","Date","getTime","Math","abs","keyCode","now","deltaY","cancelBubble","newURL","oldURL","newUrlId","addListener","cachedWidth","winWidth","update","$scroll","perfectScrollbar","wheelSpeed","wheelPropagation","minScrollbarLength","cls","element","createElement","getElementsByTagName","insertBefore","webkitTransformStyle","MozTransformStyle","msTransformStyle","transformStyle","undefined","st","removeChild","NodeList","_addEventListener","support","prefix","_addWheelListener","eventName","useCapture","originalEvent","srcElement","type","deltaMode","deltaX","deltaZ","returnValue","wheelDelta","wheelDeltaX","detail","passive","onmousewheel","jQuery"],"mappings":"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","file":"scripts.js","sourcesContent":["document.documentElement.className = document.documentElement.className.replace(/\\bno-js\\b/g, '');\n\n(function($){\n    $(document).ready(function() {\n\n        const html     = document.querySelector(\"html\");\n        let pageScroll = document.querySelector(\".main\").classList.contains(\"page-scroll\");\n        let mobile     = window.matchMedia(\"(max-width: 767px)\").matches;\n\n        /* ===================\n           Text Lines Animate \n        ====================== */\n        \n        function setLines(){    \n            console.log(\"=== SET LINES ===\");\n\n            let textBlock = document.querySelectorAll(\".animate-text\");\n            let blockWidth, fontSize, lineLength;   \n            \n            textBlock.forEach(function(block){\n               \n                const coef = 0.60;\n                let text = block.innerText || block.textContent || \"\";\n                let resultArr = [];\n                let resultHTML;\n                \n                if (block.parentNode.classList.contains(\"feedback-item\") && mobile){  \n                    blockWidth = window.innerWidth - 35;\n                    fontSize   = 13;\n                    lineLength = blockWidth / (fontSize * coef);\n                } else {\n                    let blockWrap = findParent(block, \"animate-text-wrap\");\n                    blockWidth = (block.classList.contains(\"animate-text-p\")) ? blockWrap.offsetWidth - 80 : blockWrap.offsetWidth;\n                    fontSize   = parseInt(window.getComputedStyle(block, null).getPropertyValue('font-size'));\n                    lineLength = blockWidth / (fontSize * coef);\n                }\n\n                insertToHTML();\n                \n                function linesWrap(text, maxLength){\n                    \n                    let line = [];\n                    let length = 0;\n\n                    text.split(\" \").forEach(function(word){\n\n                        if ((length + word.length) >= maxLength){\n                            resultArr.push(\"<div>\" + line.join(\" \") + \"</div>\");\n                            line = []; \n                            length = 0;\n                        }\n\n                        length += word.length + 1;\n                        line.push(word);\n                    });\n\n                    if (line.length > 0) resultArr.push(\"<div>\" + line.join(\" \") + \"</div>\");\n\n                    return resultArr;\n                };\n\n                function insertToHTML(){\n                    linesWrap(text, lineLength);\n                    resultHTML = resultArr.join(\"\");\n                    block.innerHTML = resultHTML;\n                }\n            });\n\n            console.log(\"=== END SET LINES ===\");\n        }   \n\n        setLines(); \n\n        window.addEventListener(\"orientationchange\", function(){\n            window.location.reload();\n            // html.classList.add(\"orientation-change\");\n        }, true);\n\n\n        // function checkMobile(){\n        //     if (mobile){\n        //         setLines(\"mobile\");\n\n        //         console.log(\"'It is mobile'\");\n        //     } else {\n        //         setLines();\n\n        //         console.log(\"'It is not mobile'\");\n        //     }\n        // }\n\n        //checkMobile();\n        \n        // let mql = window.matchMedia(\"(orientation: portrait)\");\n        \n        // mql.addListener(function(m) {\n        //     if(m.matches) {\n        //         setTimeout(setLines, 1000);\n        //     } else {\n        //         setTimeout(setLines, 1000);\n        //     }\n           \n        // });\n\n        // window.addEventListener('resize', function(){\n        //     //if (window.matchMedia(\"(max-width: 767px)\").matches) setLines();\n        //     setTimeout(setLines, 600);    \n        // }, false);\n\n        /* ===================\n           Consultation \n        ===================== */\n\n        let formWrap   = $(\".consult-form-wrap, .consult-top\");\n        let mesConsult = $(\".message-consult\");\n        let copyRight  = $(\".copyright-mobile\");\n\n        $(\".btn-send\").length && $(\".btn-send\").on(\"click\", function (e) {\n            formWrap.removeClass(\"fade-in\").addClass(\"fade-out\");\n            copyRight.hide();\n            mesConsult.removeClass(\"fade-out\").addClass(\"fade-in\");\n\n            e.preventDefault();\n        });\n\n        $(\".btn-back-form\") && $(\".btn-back-form\").on(\"click\", function (e) {\n            formWrap.removeClass(\"fade-out\").addClass(\"fade-in\");\n            mesConsult.removeClass(\"fade-in\").addClass(\"fade-out\");\n\n            if (window.innerWidth < 768) copyRight.show();\n\n            e.preventDefault();\n        });\n        \n        /* ==============\n           Menu\n        ================= */\n\n        let $body = document.querySelector(\"body\");\n        let navMenu = document.querySelector(\".menu\");\n\n        navMenu.addEventListener(\"click\", function (event) {\n            if (event.target.tagName == \"IMG\" && $body.classList.contains(\"menu-close\")) {\n                event.stopPropagation();\n                return;\n            }\n\n            if ($body.classList.contains(\"menu-open\")) {\n                $body.classList.add(\"menu-close\");\n\n                setTimeout(function () {\n                    $body.classList.remove(\"menu-open\");\n                }, 0);\n\n            } else {\n                $body.classList.add(\"menu-open\");\n                $body.classList.remove(\"menu-close\");\n            }\n        });\n        \n        let $like = document.querySelectorAll(\".like\");\n        let $likeBg = document.querySelectorAll(\".social-drop-bg-animate\");\n\n        if (pageScroll){\n            Array.prototype.forEach.call($like, function(likeItem){\n                likeItem.addEventListener(\"mouseover\", function(){\n                    let $socDrop = this.parentNode.querySelector(\".social-drop\");\n\n                    $likeBg.forEach(function(item){\n                        item.beginElement();\n                    });\n\n                    // if ($socDrop.classList.contains(\"show\")){\n                    //     $socDrop.classList.add(\"hide\");\n                    //     $socDrop.classList.remove(\"show\");\n                    // } else {\n                    //     $socDrop.classList.add(\"show\");\n                    //     $socDrop.classList.remove(\"hide\");\n                    // }\n                });\n            });\n        }\n\n        /* ==============\n           Slick Slider\n        ================= */\n\n        // if ($(\".slick-slider\").length){\n        //     $(\".slick-slider\").slick({\n        //         swipe:false,\n        //         swipeToSlide:false,\n        //         infinite: true,\n        //         adaptiveHeight:true,\n        //         speed: 150,\n        //         arrows: true,\n        //         slidesToScroll: 1,\n        //         slidesToShow: 1,\n        //         fade: true,\n        //         dots: true,\n\n        //         responsive: [{\n        //             breakpoint: 1018,\n        //             settings: {\n        //                 swipe:true\n        //             }\n        //         }]    \n        //     })\n        // };\n\n        /* ==============\n           Drops\n        ================= */\n        let assortFilter = new AssortmentFilter();\n\n        function clearAssortmentFilter() {\n            let allFilterOptions = document.querySelectorAll(\".filter-wrap .filter-option\");\n            Array.prototype.forEach.call(allFilterOptions, function (filterOption) {\n                filterOption.classList.remove(\"selected\");\n            });\n        }\n\n        if (document.body.contains(document.querySelector(\".drop-wrap\"))) {\n            let $filterWrap = document.querySelector(\".filter-wrap\");\n            let $dropBtn = $filterWrap.querySelector(\".drop-wrap .btn\");\n            let $filterBtnText = $filterWrap.querySelector(\".filter-btn-text\");\n\n            let $dropBlock = document.querySelector(\".drop-block\");\n            let $dropInner = $dropBlock.querySelector(\".drop-inner\");\n            \n            $dropBtn.addEventListener(\"click\", function () {\n                let height = $dropBlock.querySelector(\".drop-h\").offsetHeight;\n\n                //$dropBlock.classList.toggle(\"show\");\n                if ($dropBlock.classList.contains(\"show\")) {\n                    $dropBlock.classList.remove(\"show\");\n                    $filterWrap.classList.remove(\"show\");\n                    assortFilter.reset();\n                    clearAssortmentFilter();\n                } else {\n                    $dropBlock.classList.add(\"show\");\n                    $filterWrap.classList.add(\"show\");\n                }\n\n                if ($dropBlock.classList.contains(\"show\")) {\n                    $filterBtnText.innerHTML = \"Закрыть\";\n                    $dropInner.setAttribute(\"style\", \"max-height: \" + height + \"px\");\n                } else {\n                    dropClose();\n                }\n            });\n\n            $(document).on(\"click\", function(e){\n                if ($(e.target).closest(\".drop-wrap\").length) return;\n                dropClose();\n                $dropBlock.classList.remove(\"show\");\n                $filterWrap.classList.remove(\"show\");\n                e.stopPropagation();\n            });\n\n            function dropClose(){\n                $filterBtnText.innerHTML = \"Открыть\";\n                $dropInner.setAttribute(\"style\", \"max-height: 0px\");\n            }\n        }\n\n        if (pageScroll) {\n            let $fbPage = document.querySelector(\".page-feedback\");\n            let $fbHead = $fbPage.querySelectorAll(\".answer-head\");\n            let $fbButtonPlus = $fbPage.querySelectorAll(\".point-btn.plus\");\n\n            $fbButtonPlus.forEach(function (buttonPlus) {\n\n                buttonPlus.addEventListener(\"click\", function () {\n                    let $point = this.parentNode.parentNode;\n                    let $text = $point.querySelector(\".answer-body\");\n                    let textHeight = $text.querySelector(\".answer-body-inner\").offsetHeight;\n\n                    $point.classList.toggle(\"show\");\n                    if ($point.classList.contains(\"show\")) {\n                        $text.setAttribute(\"style\", \"max-height: \" + textHeight + \"px\");\n                    } else {\n                        $text.setAttribute(\"style\", \"max-height: 0px\");\n                    }\n                });\n            });\n        }\n\n        /* ==================\n           Navigation Scheme\n        ==================== */\n\n        let btnScheme = document.querySelectorAll(\".scheme-nav button\");\n        let pointClone = document.querySelectorAll(\".scheme-nav .point\");\n\n        btnScheme.forEach(function (btn) {\n\n            btn.addEventListener(\"click\", function (e) {\n                let pane = document.querySelectorAll(\".scheme-desc\");\n                let point = document.querySelectorAll(\".object-scheme-wrap .point\");\n                let activePane = document.querySelector(\".scheme-desc.active\");\n                let pointActive = document.querySelector(\".point.active\");\n\n                indexDetect(activePane);\n\n                pointActive.classList.remove(\"active\");\n                activePane.classList.remove(\"active\");\n\n                if (e.target.classList.contains(\"btn-nav-right\")) {\n                    (indexActive == lastPoint) ? indexActive = 0 : indexActive++;\n                } else {\n                    (indexActive == 0) ? indexActive = lastPoint : indexActive--;\n                }\n\n                changeClone(indexActive);\n                point[indexActive].classList.add(\"active\");\n                pane[indexActive].classList.add(\"active\");\n            });\n        });\n\n        function changeClone(index) {\n            pointClone.forEach(function (clone) {\n                clone.classList.remove(\"active\");\n            });\n            pointClone[index].classList.add(\"active\");\n        }\n\n        function indexDetect(activePane) {\n            let wrap = activePane.parentNode;\n            let list = wrap.children;\n\n            lastPoint = list.length - 1;\n            indexActive = Array.prototype.indexOf.call(list, activePane);\n        }\n\n        /* ==============\n           Tabs\n        ================= */\n\n        function changeMissionTab() {\n            let missinTabsParent = document.querySelector(\".mission-text-slider-wrap\");\n            if (!missinTabsParent) {\n                return;\n            }\n            let missionTextTabs = missinTabsParent.querySelectorAll(\".mission-tabs .tab\");\n            let activeTabIndex = null;\n\n            for (let i = 0; i < missionTextTabs.length; i++) {\n                const element = missionTextTabs[i];\n                if (element.classList.contains(\"active\")) {\n                    activeTabIndex = i;\n                    break;\n                }\n            }\n\n            missionTextTabs[activeTabIndex].classList.remove(\"active\");\n            let correspondingTabId = missionTextTabs[activeTabIndex].querySelector(\"span\").getAttribute(\"data-tab\");\n            document.getElementById(correspondingTabId).classList.remove(\"active\");\n\n            if (activeTabIndex >= (missionTextTabs.length - 1)) {\n                activeTabIndex = 0;\n            } else {\n                activeTabIndex += 1;\n            }\n\n            missionTextTabs[activeTabIndex].classList.add(\"active\");\n            correspondingTabId = missionTextTabs[activeTabIndex].querySelector(\"span\").getAttribute(\"data-tab\");\n            document.getElementById(correspondingTabId).classList.add(\"active\");\n        }\n\n        var missionTabsIntervalID = window.setInterval(changeMissionTab, 3000);\n\n        // another implementation\n        let tabs = document.querySelectorAll(\".tabs\");\n        function tabClick(event) {\n            event.preventDefault();\n\n            // TODO: check if it is mission tab\n            if(event.currentTarget.classList.contains(\"mission-tabs\") && missionTabsIntervalID) {\n                window.clearInterval(missionTabsIntervalID);\n                missionTabsIntervalID = false;\n            }\n\n            let tabElements = event.currentTarget.querySelectorAll(\".tab\");\n            Array.prototype.forEach.call(tabElements, function (tabElement) {\n                tabElement.classList.remove(\"active\");\n            });\n\n            let targetTab = findParent(event.target, \"tab\");\n            if (targetTab != null) {\n                targetTab.classList.add(\"active\");\n            }\n\n            animateTabLine(event.currentTarget);\n\n            let activePaneId = event.target.getAttribute(\"data-tab\");\n            let activePane = document.getElementById(activePaneId);\n\n            // clear panes state\n            let panesParent = activePane.parentElement;\n            let contentPanes = panesParent.querySelectorAll(\".tab-pane\");\n            Array.prototype.forEach.call(contentPanes, function (pane) {\n                pane.classList.remove(\"active\");\n            });\n\n            activePane.classList.add(\"active\");\n            indexDetect(activePane);\n            changeClone(indexActive);\n        }\n\n        Array.prototype.forEach.call(tabs, function (tab) {\n            tab.addEventListener(\"click\", tabClick);\n            animateTabLine(tab);\n        });\n\n        // TABS LINE ANIMATION\n        function animateTabLine(tabs) {\n            let line = tabs.querySelector(\".line\");\n            let activeTab = tabs.querySelector(\".tab.active\");\n            if (line) {\n                // setTimeout(function(){\n                    let lineWidth = activeTab.querySelector(\"span\").offsetWidth;\n                    let offset = activeTab.getBoundingClientRect().left - tabs.getBoundingClientRect().left;\n                    let leftValue = offset + (activeTab.offsetWidth - (lineWidth - 26));\n                    console.log(offset);\n                    line.style.left = leftValue + \"px\";\n                    line.style.width = lineWidth - 52 + \"px\";\n                // }, 250);\n            }\n        }\n\n        // SVG Drowing Set\n        $(\".point-ico-svg\").length && (function(){\n            replaceWithPaths($(\".point-ico-svg\"));\n            setDash($(\".point-ico-svg\"));\n        }());\n        \n        /* ================\n           Filter Feedback\n        =================== */\n\n        var ffItem = document.querySelectorAll(\".feedback-filter div\");\n        var feedback = document.querySelectorAll(\".feedback-item\");\n\n        function ffSet(){\n            ffItem.forEach(function (item) {\n                item.addEventListener(\"click\", function () {\n                    var filterPar = item.getAttribute(\"data-filter\");\n                    var scrollY = document.querySelector(\".scroll-block\");\n\n                    for (let i = 0; i < ffItem.length; i++) {\n                        ffItem[i].classList.remove(\"active\");\n                    }\n\n                    scrollBar(true);\n                    item.classList.remove(\"active\");\n                    this.classList.add(\"active\");\n\n                    for (let i = 0; i < feedback.length; i++) {\n                        feedback[i].classList.remove(\"show\");\n\n                        if (filterPar == \"all\") {\n                            feedback[i].classList.add(\"show\");\n                        } else if (feedback[i].getAttribute(\"data-feedback\") === filterPar) {\n                            feedback[i].classList.add(\"show\");\n                        }\n                    }\n                });\n            });\n        }\n\n        /* ================\n           Map Filter\n        =================== */\n\n        if (document.body.contains(document.querySelector(\".map-filter-btn\"))){\n            let mapFilterBtn  = document.querySelector(\".map-filter-btn\");\n            let mapFilter     = document.querySelector(\".map-filter\");\n            let mapFilterWrap = document.querySelector(\".map-column\");\n            let mapFilterBtnSpan = mapFilterBtn.querySelector(\"span\");\n            \n            mapFilterBtn.addEventListener(\"click\", function(){\n                let textTgl = mapFilterBtnSpan.getAttribute(\"data-text-tgl\");\n                let text = mapFilterBtnSpan.innerText || mapFilterBtnSpan.textContent || \"\";\n\n                mapFilterBtnSpan.innerHTML = textTgl;\n                mapFilterBtnSpan.setAttribute(\"data-text-tgl\", text);\n\n                if (mapFilterWrap.classList.contains(\"hide-filter\")) { \n                    mapFilterWrap.classList.remove(\"hide-filter\");\n                    mapFilterBtn.classList.remove(\"hide\"); \n                } else {\n                    mapFilterWrap.classList.add(\"hide-filter\");\n                    mapFilterBtn.classList.add(\"hide\"); \n                } \n            });\n        }    \n        \n        /* ================\n           Product Hover\n        =================== */\n\n        if (document.body.contains(document.querySelector(\".product-list\"))){\n            let point = document.querySelectorAll(\".product-list section > div\");\n            let pointAct = findPointAct(point);\n            let pointWidth = pointAct.offsetWidth;\n            let pointPos = pointAct.offsetLeft;\n            let pointBg = document.querySelector(\".product-list > span\");\n\n            setBg(pointWidth, pointPos);\n\n            for (let i = 0; i < point.length; i++){\n                \n                point[i].addEventListener(\"mouseover\", function(){\n                    changeBg(this);\n                });\n\n                point[i].addEventListener(\"mouseleave\", function(){\n                    if (!this.classList.contains(\"active\")){\n                        pointAct = findPointAct(point);\n                        changeBg(pointAct);\n                    }\n                });\n\n                point[i].addEventListener(\"click\", function(){                    \n                    changeBg(this);\n                });\n            }\n\n            window.addEventListener(\"resize\", function(){\n                pointAct = findPointAct(point);\n                changeBg(pointAct);\n            });\n\n            function changeBg(pnt){\n                pointWidth = pnt.offsetWidth;\n                pointPos = pnt.offsetLeft;\n                setBg(pointWidth, pointPos);\n            }\n\n            function setBg(width, pos){\n                pointBg.setAttribute(\"style\", \"width: \" + width + \"px; left: \" + pos + \"px\");\n            }\n\n            function findPointAct(point){\n\n                for (let i = 0; i < point.length; i++){\n                    if (point[i].classList.contains(\"active\")){\n                        return point[i];\n                    }\n                }\n            }\n        }\n\n        /* ==============\n           Product Zoom\n        ================= */\n\n        (function(){\n            // const prodImg      = document.querySelector(\".product-popup\");\n            // const prodImgStart = document.querySelector(\".product-viewer-wrap\");\n            // const prodBg       = document.querySelector(\".product-popup-bg\");\n            // const prodImgBtn   = document.querySelectorAll(\".product-popup-btns li\");\n            // const img      = document.querySelector(\".product-popup-img\");\n            // const imgFront = document.querySelector(\".product-front\");\n            // const imgBack  = document.querySelector(\".product-back\");\n\n            // if (document.body.contains(prodImg)){\n            //     prodImgStart.addEventListener(\"click\", function(){\n            //         if (window.innerWidth > 767){\n            //             prodImg.classList.add(\"open\");\n            //             prodImg.classList.remove(\"close\");\n            //         }\n            //     });\n\n            //     prodBg.addEventListener(\"click\", function(){\n            //         prodImg.classList.remove(\"open\");\n            //         prodImg.classList.add(\"close\");\n            //     });\n\n            //     prodImgBtn.forEach(function(btn){\n            //         btn.addEventListener(\"click\", function(){\n            //             let cls = btn.classList;\n\n            //             if (!cls.contains(\"active\")){    \n            //                 prodImgBtn.forEach(function(btnAll){\n            //                     btnAll.classList.remove(\"active\");\n            //                 });\n            //                 img.classList.toggle(\"flip\");\n            //                 btn.classList.add(\"active\");\n            //             }\n\n            //             // switch(true){\n            //             //     case cls.contains(\"front\"):\n            //             //         btn.classList.add(\"active\");\n            //             //     break;\n\n            //             //     case cls.contains(\"back\"):\n            //             //         btn.classList.add(\"active\");    \n            //             //     break;\n            //             // }\n            //         });\n            //     });\n            // }\n\n            const prodWrap  = document.querySelector(\".product-viewer-wrap\"); \n            const prodZoom  = document.querySelector(\".product-zoom\");\n            const zoomImg   = document.querySelectorAll(\".zoom-img\");\n            \n            if (document.body.contains(prodWrap) && \n                html.classList.contains(\"no-touchevents\") &&\n                (prodWrap.classList.contains(\"product-viewer-front\") ||\n                 prodWrap.classList.contains(\"product-viewer-back\"))){\n\n                let zoomSpeed = \"100ms\",\n                    zoomFunction = \"ease\",\n                    zoomMoveSpeed = \"100ms\",\n                    zoomMoveFunction = \"linear\",\n                    scale = 1.05, mouseX, mouseY, offsetX, offsetY, zoomPosX, zoomPosY, showedImg;\n\n                var initZoomableEventHandlers = function (){\n\n                    prodWrap.addEventListener(\"mouseenter\", function(e){\n                        \n                        for (let i = 0; i < zoomImg.length; i++){\n                            zoomImg[i].classList.remove(\"show\");\n                        }\n\n                        if (prodWrap.classList.contains(\"product-viewer-front\")){\n                            showedImg = prodZoom.querySelector(\".zoom-img-front\");\n                            showedImg.classList.add(\"show\");\n                            prodZoom.classList.add(\"show\");\n                        } else if (prodWrap.classList.contains(\"product-viewer-back\")){\n                            showedImg = prodZoom.querySelector(\".zoom-img-back\");\n                            showedImg.classList.add(\"show\");\n                            prodZoom.classList.add(\"show\");\n                        }\n                        \n                        mouseX = e.pageX - this.getBoundingClientRect().left;\n                        mouseY = e.pageY - this.getBoundingClientRect().top;\n\n                        offsetX = -1 * 1.95 * mouseX;\n                        offsetY = -1 * 1.7 * mouseY;\n\n                        zoomPosX = e.pageX - 270;\n                        zoomPosY = e.pageY - 260;\n\n                        prodZoom.setAttribute(\"style\", \"left:\" + zoomPosX + \"px; top: \" + zoomPosY + \"px;\");\n\n                        styles = \"transform: matrix(\" + scale + \",0,0,\" + scale + \",\" + offsetX + \",\" + offsetY + \"); transition: transform \" + zoomSpeed + \" \" + zoomFunction;\n                        showedImg.setAttribute(\"style\", styles);\n                        \n                        showedImg.addEventListener(\"transitionend\", function(){\n                            showedImg.classList.remove(\"z-entering\");\n                        });\n                        \n                    });\n\n                    prodWrap.addEventListener(\"mousemove\", function(e){\n\n                        if (!showedImg.classList.contains(\"z-entering\") && !showedImg.classList.contains(\"z-exiting\")) {\n                            mouseX = e.pageX - this.getBoundingClientRect().left;\n                            mouseY = e.pageY - this.getBoundingClientRect().top;\n\n                            offsetX = -1 * 1.95 * mouseX;\n                            offsetY = -1 * 1.7 * mouseY;\n\n                            zoomPosX = e.pageX - 270;\n                            zoomPosY = e.pageY - 260;\n\n                            prodZoom.setAttribute(\"style\", \"left:\" + zoomPosX + \"px; top: \" + zoomPosY + \"px;\");\n\n                            styles = \"transform: matrix(\" + scale + \",0,0,\" + scale + \",\" + offsetX + \",\" + offsetY + \"); transition: transform \" + zoomSpeed + \" \" + zoomFunction;\n                            showedImg.setAttribute(\"style\", styles);\n                        }\n                    });\n\n                    prodWrap.addEventListener(\"mouseleave\", function(e){\n                        \n                        setTimeout(function(){\n                            prodZoom.classList.remove(\"show\");\n                        }, 400);\n                        \n                        styles = \"transform: matrix(1,0,0,1,0,0); transition: transform \" + zoomSpeed + \" \" + zoomFunction;\n\n                        if (scale !== 1) showedImg.classList.add(\"z-exiting\");\n                        \n                        showedImg.classList.add(\"z-exiting\");\n                        setTimeout(function(){\n                            showedImg.setAttribute(\"style\", styles);\n                        }, 1000);\n                        \n\n                        showedImg.addEventListener(\"transitionend\", function(){\n                            showedImg.classList.remove(\"z-exiting\");\n                        });\n                    });\n                };\n\n                initZoomableEventHandlers();\n            }\n            \n        }());\n\n        /* ==================\n           FAQ Custom Cursor\n        ===================== */\n\n        let cursor = $(\".cursor-move\");\n        let blockTarget = $(\".cursor-target\");\n        let btnCursorLock = $(\".product-list section > div a, .point-btn\");\n\n        var ElementCursor = {\n\n            setCursor: function(e){\n                cursor.show().addClass(\"show\").removeClass(\"drag\");\n                blockTarget.addClass(\"hover\");\n                $('html').mousedown(function (e){return false});\n                ElementCursor.updateCursor();\n            },\n\n            dragCursor: function(){\n               cursor.addClass(\"drag\");        \n            },\n\n            removeCursor: function(){\n                cursor.removeClass(\"show drag\");\n                blockTarget.removeClass(\"hover\");\n            },\n\n            hideCursor: function(){\n                cursor.hide();\n            },\n\n            updateCursor: function(){\n\n                $(document).mousemove(function (e){\n                    cursor.css({\n                        'top' : e.pageY + 3 + 'px',\n                        'left': e.pageX + 3 + 'px'\n                    });\n                });\n            }\n        };\n\n        blockTarget.on(\"mouseenter\", function(e){\n            ElementCursor.setCursor();\n        });\n\n        btnCursorLock.on(\"click\", function(){\n            ElementCursor.hideCursor();\n        });\n\n        btnCursorLock.on({\n            \"mouseenter\": function(){\n                ElementCursor.removeCursor();\n            },\n\n            \"mouseleave\": function(){\n                ElementCursor.setCursor();\n            }\n        });\n\n        blockTarget.on(\"mouseleave\", function(){\n            ElementCursor.removeCursor();\n        });\n\n        blockTarget.on(\"mousedown\", function(){\n            ElementCursor.dragCursor();\n        });\n\n        blockTarget.on(\"mouseup\", function(){\n            ElementCursor.setCursor();\n        });\n\n        scrollBar();\n\n        windowSize();\n        $(window).resize(windowSize);\n\n\n        /* =============================\n            CUSTOM SCROLL AND NAVIGATION\n        ================================ */\n\n        //if (pageScroll){\n\n            //////////////////////////////\n            // ONE-TIME INITIALIZATIONS \n            /// for single-page app   ////\n\n            var $object = $('.object-main');\n            var $scheme = $('.object-scheme');\n\n            if ($object.length) {\n                $object.rotate3d({\n                    'source': 'images/object-1/1_000',\n                    'count' : 41,\n                    'auto'  : true\n                });\n            }\n            \n            if ($scheme.length) {\n                $scheme.rotate3d({\n                    'source': 'images/scheme/scheme_',\n                    'count' : 63,\n                    'auto'  : true\n                });\n            }\n            \n            let $slider = $(\".assort-slider\");\n            let $slide = $slider.find(\".slide\");\n            let $sliderLoader = $(\".assort-slider-loader\");\n            let $bgItem = $(\".assort-bg-list li\");\n            let $curSlideInd = $(\".assort-slider-ind span\");\n            let $slideItems = $(\".assort-slider-ind i\");\n            let $cubes = $(\".cubes-b\");\n            let $slidesCount = 0;\n            let $indRev = $(\".assort-slider-rev section\");\n            let $indRevItem = $indRev.find(\"div\");\n            let indArr = [0, -30, -60, -90, -120, -150];\n            \n            function displaySliderFugure(figIndex) {\n                $(\".figures\").removeClass(\"show\");\t\n                $(\".figures-\" + figIndex).addClass(\"show\");\n            }\n\n            function displayCurrentSlideNumber(slideId){\n                //$curSlideInd.text(slideId);\n                $indRevItem.removeClass(\"active\");\n                $indRevItem.eq(slideId).addClass(\"active\");\n\n                $indRev.css({ \"transform\": \"translateY(\" + indArr[slideId] + \"px\" });\n            }\n\n            // Slider Description\n            function changeSliderDesc(slideIndex){\n                var $sliderDesc = document.querySelectorAll(\".assort-desc-wrap .assort-desc-item\");\t\n\n                for (let i = 0; i < $sliderDesc.length; i++){\n                    $sliderDesc[i].classList.remove(\"show\");\n                }\n\n                $sliderDesc[slideIndex].classList.add(\"show\");\n            }\n\n            function setSlideVisualAttributes(slick, slideId) {\n                var currentSlideElement = slick.$slides.get(slideId);\n                var currentSlideSlickIndex = $(currentSlideElement).data(\"slick-index\");\n                \n                displaySliderFugure(currentSlideSlickIndex + 1);\n                displayCurrentSlideNumber(slideId);\n\n                var $curSlide = $bgItem.eq(currentSlideSlickIndex);\n        \n                $bgItem.removeClass(\"show\");\n                $curSlide.addClass(\"show\");\n\n                setTimeout(function(){\n                    $(\".assort-bg-list\").attr(\"class\", \"assort-bg-list\");\n                    $(\".assort-bg-list\").addClass(\"bg-\" + (currentSlideSlickIndex + 1));\n                    //$bgItem.not(\":eq(\" + currentSlide + \")\").removeClass(\"show\");\n                }, 900);\n\n                $(\"body\")\n                    .attr(\"class\", \"\")\n                    .addClass(\"page-style-\" + (currentSlideSlickIndex + 1));\n\n                setTimeout(changeSliderDesc.bind(this, currentSlideSlickIndex), 0);\n            }\n\n            function getCurrentSlickSlideFromStorage(){\n                let currentSlideIndex = localStorage.getItem(\"currentSlide\");\n                if (currentSlideIndex) {\n                } else {\n                    currentSlideIndex = 0;\n                }\n                return currentSlideIndex;\n            }\n            let lsCurrentSlideIndex = getCurrentSlickSlideFromStorage();\n\n            $slider.on(\"init\", function(event, slick){\n                console.log(\"slick slider init\");\n                \n                $slidesCount = slick.slideCount;\n                \n                $slideItems.text($slidesCount);\n\n                setSlideVisualAttributes(slick, lsCurrentSlideIndex);\n                \n            });\n\n            $slider.on(\"reInit\", function(event, slick){\n                console.log(\"slick slider re-init\");\n                \n                $slidesCount = slick.slideCount;\n                \n                $slideItems.text($slidesCount);\n\n                setSlideVisualAttributes(slick, slick.currentSlide);\n\n            });\n\n            if ($slider.length) {\n                $slider.slick({\n                    centerMode: false,\n                    infinite: true,\n                    slidesToShow: 3,\n                    slidesToScroll: 1,\n                    speed: 500,\n                    focusOnSelect: false,\n                    swipe: false,\n                    useTransform: true,\n                    //cssEase: 'cubic-bezier(0.11,0,0.45,1)',\n                    touchMove: false,\n                    draggable: false,\n                    lazyLoad: 'progressive',\n                    \n                    responsive: [{\n                        breakpoint: 1025,\n                        settings: {\n                            slidesToShow: 1,\n                            fade: true\n                        }\n                    }]\n                });\n            }\n            function displayFilterNoResults() {\n                console.log(\"No results for this filter criteria\");\n            }\n            // slider filter\n            var filterItem = $(\".filter-item\");\n\n            // Filter Click        \n            filterItem.on(\"click\", function(e){\n                let elem = null;\n                //console.log(elem.data(\"filter-option\") + \": \" + elem.data(\"filter-value\"));\n\n                if (e.target.classList.contains(\"filter-option\")) {\n                    elem = e.target;\n                } else {\n                    elem = findParent(e.target, \"filter-option\");\n                }\n\n                // create jQuery instance to use data() method which is more convinient than getAttribute()\n                jqElem = $(elem);\n\n                let dropsElem = findParent(elem, \"drops\");\n                \n                \n                if (elem.classList.contains(\"selected\")) {\n                    elem.classList.remove(\"selected\");\n                    assortFilter.add(jqElem.data(\"filter-option\"), jqElem.data(\"filter-value\"), true, displayFilterNoResults);\n                } else {\n                    if (dropsElem != null) {\n                        // remove \"selected\" from descendant options\n                        let allDrops = dropsElem.querySelectorAll(\".filter-option\");\n                        Array.prototype.forEach.call(allDrops, function (drop) {\n                            if (drop.classList.contains(\"selected\")) {\n                                assortFilter.add($(drop).data(\"filter-option\"), $(drop).data(\"filter-value\"), true);\n                            }\n                            drop.classList.remove(\"selected\");\n                        });\n                    }\n\n                    elem.classList.add(\"selected\");\n                    assortFilter.add(jqElem.data(\"filter-option\"), jqElem.data(\"filter-value\"), false, displayFilterNoResults);\n                }\n            });\n\n            // VIDEO\n                let video = document.querySelector(\".mission-video video\");document.querySelector(\".mission-video video\");\n                let timer = null;\n\n                let touch = document.querySelector(\"html\").classList.contains(\"touchevents\");\n                let videoWrapper = document.querySelector(\".video-block-wrapper\");\n                let videoContent = document.querySelector(\".mission-video-content\");\n                let videoWrap  = document.querySelector(\".video-calibrate\");\n                let videoPlay  = document.querySelector(\".mission-video-play\");\n                let videoCloseBtn = document.querySelector(\".mission-video-close\");\n                let siteHeader = document.getElementById(\"header\");\n                let videoCubes = document.querySelector(\".page-mission .cubes\");\n            \n            // var supportsVideo = !!document.createElement('video').canPlayType;\n            // if (supportsVideo) {\n                \n            // }\n            if (video) {\n                video.controls = false;\n                video.addEventListener('canplay', function() {\n                    console.log(\"Video state: \" + video.readyState);\n                    \n                    // if(video.readyState >= 3) {\n                    //     videoPlay.querySelector(\".preview-image\").style.opacity = \"0\";\n                    // }\n                }, false);\n\n                videoWrap.addEventListener(\"click\", function() {\n                    if (!videoWrapper.classList.contains(\"open\")){\n                        //timer = setTimeout(videoOpen, 600);\n                        videoOpen()\n                        videoCubes.classList.add(\"hide\");\n                    }\n                });\n\n                videoWrap.addEventListener(\"mouseleave\", function(){\n                    //clearTimeout(timer);\n                    //setTimeout(videoClose, 200);\n                });\n    \n                videoCloseBtn.addEventListener(\"click\", function(){\n                    setTimeout(videoClose, 200);\n                    videoCubes.classList.remove(\"hide\");\n                });\n\n                window.addEventListener('blur', function() {\n                    videoClose();\n                });\n            }\n            \n            \n            function playVideoFromStart(videoElem, soundMuted) {\n                videoElem.currentTime = 0;\n                videoElem.muted = soundMuted;\n                videoElem.play();\n            }\n\n            function hideSiteHeader() {\n                siteHeader.style.opacity = \"0\";\n            }\n\n            function showSiteHeader() {\n                siteHeader.style.opacity = \"1\";\n            }\n\n            function showSiteControls(callback) {\n                if (videoCloseBtn.style.opacity != \"1\") {\n                    videoCloseBtn.style.opacity = \"1\";\n                }\n                \n                // hide menu\n                if (callback) {\n                    callback();\n                }\n            }\n\n            function hideSiteControls() {\n                videoCloseBtn.style.opacity = \"0\";\n\n            }\n\n            function handleVideoTouch(event){\n                showSiteControls(function(){\n                    setTimeout(hideSiteControls, 1500);\n                });\n            }\n\n            function videoOpen(){\n                console.log(\"video Open\");\n                hideSiteHeader();\n                //setCirclePos(\"2000px\");\n                //video.play();\n                playVideoFromStart(video, false);\n                \n                videoWrapper.classList.add(\"open\");\n                \n                videoContent.addEventListener(\"mousemove\", handleVideoTouch, false);\n                videoContent.addEventListener(\"touchstart\", handleVideoTouch, false);\n            }\n\n            function videoClose(){\n                console.log(\"video Close\");\n                video.muted = true;\n                showSiteHeader();\n                //setCirclePos(radius);\n                videoWrapper.classList.remove(\"open\");\n                setTimeout(function(){ video.pause() }, 500);\n                \n                videoContent.removeEventListener(\"mousemove\", handleVideoTouch, false);\n                videoContent.removeEventListener(\"touchstart\", handleVideoTouch, false);\n            }\n\n            \n\n            \n            // window.addEventListener(\"resize\", function(){\n    \n            // \tif (!videoWrap.classList.contains(\"open\")){\n            // \t\tsetCirclePos(radius);\n            // \t\tvideoPlay.classList.remove(\"hide\");\n            // \t} \n            // });\n\n            // ONE-TIME INITIALIZATIONS END //\n            //////////////////////////////////\n\n            /* =========================================\n                3D ANIMATION AND BLOCK-SPECIFIC SCRIPTS\n            ========================================== */\n\n            function executePageSpecificScript(blockId) {\n\n                switch (blockId) {\n                    case \"main\":\n                        videoClose()\n                        $object.animateOpen(true, function () {\n                            setTimeout($object.animateClose, 300);\n                        });\n                        break;\n                    case \"advantages\":\n                        videoClose();\n                        $scheme.animateOpen(true, function () {\n                            console.log(\"andvantages animation ended\");\n                        });\n                        break;\n                    case \"assortment\":\n                        videoClose();\n                        $slider.slick('setPosition');\n                        \n                        // Setup Classes\n                        lsCurrentSlideIndex = getCurrentSlickSlideFromStorage();\n                        $slider.slick(\"slickGoTo\", lsCurrentSlideIndex, true);\n                        // displayCurrentSlideNumber(parseInt(lsCurrentSlideIndex,10) + 1);\n\n                        function checkSliderEdge(index){\n                            if (index == 5) {\n                                $slider.slick(\"slickGoTo\", 0, true);\n                            } else {\n                                $slider.slick(\"slickNext\");\n                            }\n                        }\n                        \n                        $slider.on( \"click\", \".slick-slider-inner\", function( e ) {\n                            if (!$(this).parent().hasClass(\"slick-current\") || $(this).parent().hasClass(\"slick-cloned\")) { \n                                console.log($slider[0].slick.slideCount);\n                                \n                                if ($slider[0].slick.slideCount > 3) {\n                                    e.preventDefault();\n                                    let currentSlideIndex = $slider.slick(\"slickCurrentSlide\");\n                                    \n                                    checkSliderEdge(currentSlideIndex);\n                                }\n                            }\t\n                        });\n                                \n                        // Loader\t\t\n                        $(\".slick-arrow\").on(\"click\", function(event){\n                            let target = $(event.target);\n                            let curIndex = $slider.slick(\"slickCurrentSlide\"); \n\n                            checkSliderEdge(curIndex);\n                        });\n        \n                        function loader(){\n                            $(\".slick-list\").addClass(\"hide\");\n                            $sliderLoader.addClass(\"show\");\n        \n                            setTimeout(function(){\n                                $(\".slick-list\").removeClass(\"hide\");\n                                $sliderLoader.removeClass(\"show\");\n                            }, 700);\n                        }\n                        \n                        // Change\n                        $slider.on(\"beforeChange\", function(event, slick, currentSlide, nextSlide){\n\n                            setSlideVisualAttributes(slick, nextSlide);\n\n                            currentSlide = nextSlide;\n                            \n                            localStorage.setItem(\"currentSlide\", nextSlide);\n\n                            //html.classList.remove(\"orientation-change\");\n                        });\n\n                        break;\n                    case \"mission\":\n                        video.play();\n                        \n                        if (!missionTabsIntervalID) {\n                            missionTabsIntervalID = window.setInterval(changeMissionTab, 5000);\n                        }\n                        break;\n                    case \"faq\":\n                        videoClose();\n                        ffSet();\n                        break;\n                    case \"buy\":\n                        videoClose();\n                        break;\n                    case \"consultation\":\n                        videoClose();\n                        break;\n                    default:\n                        break;\n                }\n\n                // setTimeout(\n                //     function(){\n                //         setLines();\n                //     }, 700\n                // );\n                \n            }\n\n            let movingMenuUnderline = document.querySelector(\".menu .moving-underline\");\n            let menuListElem = document.querySelector(\".menu ul\");\n\n            function clearClassForChildren(parentElement, childSelector, classToRemove) {\n                let children = parentElement.querySelectorAll(childSelector);\n\n                Array.prototype.forEach.call(children, function (child) {\n                    child.classList.remove(classToRemove);\n                });\n            }\n\n            function playMenuUnderlineAnimation(currentBlockId) {\n                let currentNavElement = document.querySelector(\"li.\" + currentBlockId);\n\n                clearClassForChildren(menuListElem, \".menu-item\", \"active\");\n                \n                if (currentNavElement) {\n                    currentNavElement.classList.add(\"active\");\n                    let navElemOffset = currentNavElement.getBoundingClientRect().left - menuListElem.getBoundingClientRect().left;\n                    movingMenuUnderline.style.width = currentNavElement.offsetWidth + \"px\";\n                    movingMenuUnderline.style.transform = \"translateX(\" + navElemOffset + \"px)\";\n                } else {\n                    movingMenuUnderline.style.width = 0;\n                }\n            }\n\n            // SCROLL MANAGER DEFINITION\n            function Page(pageId, title){\n                this.id = pageId;\n                this.title = title;\n                this.pageElement = document.getElementById(pageId);\n\n                this.setLoaded = function(){\n                    this.pageElement.classList.add('loaded');\n                }\n                this.setLoaded = this.setLoaded.bind(this);\n                \n                this.loaded = function(){\n                    this.pageElement.classList.remove('loading');\n                    this.clearNext();\n                    this.clearPrev();\n                     \n                };\n                this.loaded = this.loaded.bind(this);\n                \n                this.load = function(){\n                    if (this.pageElement) {\n                        if (this.pageElement.classList.contains('next') || this.pageElement.classList.contains('prev')) {\n                            this.pageElement.classList.add('loading');\n                            setTimeout(this.setLoaded, 300);\n                            //this.pageElement.addEventListener(\"transitionend\", this.loaded, true);\n                            setTimeout(this.loaded, 700);\n                        } else {\n                            this.setLoaded();\n                        }\n\n                        playMenuUnderlineAnimation(this.id);\n                        executePageSpecificScript(this.id);\n                    }\n                    \n                    \n                };\n\n                this.unload = function() {\n                    if (this.pageElement) {\n                        this.pageElement.classList.remove('loaded');\n                        this.pageElement.removeEventListener(\"transitionend\", this.unload, true);\n                    }\n                    \n                };\n                this.unload = this.unload.bind(this);\n\n                this.setNext = function() {\n                    if (this.pageElement) {\n                        if (this.pageElement.classList.contains('prev')) {\n                            this.pageElement.classList.remove('prev');\n                        }\n                        this.pageElement.classList.add('next');\n                        //this.pageElement.addEventListener(\"transitionend\", this.unload, true);\n                        setTimeout(this.unload, 700);\n                    }\n                };\n\n                this.setPrev = function() {\n                    if (this.pageElement) {\n                        if (this.pageElement.classList.contains('next')) {\n                            this.pageElement.classList.remove('next');\n                        }\n                        this.pageElement.classList.add('prev');\n                        //this.pageElement.addEventListener(\"transitionend\", this.unload, true);\n                        setTimeout(this.unload, 700);\n                    }\n                };\n\n                this.clearPrev = function() {\n                    this.pageElement.classList.remove('prev');\n                }\n\n                this.clearNext = function() {\n                    this.pageElement.classList.remove('next');\n                }\n\n                this.currentToPrev = function() {\n                    this.setPrev();\n                };\n\n                this.nextToCurrent = function() {\n                    this.load();\n                };\n\n                this.currentToNext = function() {\n                    this.setNext();\n                };\n\n                this.prevToCurrent = function() {\n                    this.load();\n                };\n\n            }\n\n            function ScrollManager(pagesArray, currentId, pageIndicatorId){\n                this.pageIndicator;\n                this.currentPage = null;\n                this.previousPage = null;\n                this.nextPage = null;\n                this.pagesArray = pagesArray;\n                this.currentPageIndex = 0;\n\n                this.displayCurrentPageTitle = function (title) {\n                    if (this.pageIndicator != null) {\n                        this.pageIndicator.querySelector('.current-page-title').innerHTML = title;\n                    }\n                }\n\n                this.displayPageByIndex = function (index) {\n                    if (this.currentPage) {\n                        this.currentPage.unload();\n                    }\n                    this.currentPageIndex = index;\n                    this.currentPage = this.pagesArray[index];\n                    this.currentPage.load();\n                    this.displayCurrentPageTitle(this.currentPage.title);\n\n                    if (index > 0) {\n                        this.previousPage = this.pagesArray[index - 1];\n                        this.previousPage.setPrev();\n                    } else {\n                        this.previousPage = null;\n                    }\n\n                    if (index < (this.pagesArray.length - 1)) {\n                        this.nextPage = this.pagesArray[index + 1];\n                        this.nextPage.setNext();\n                    } else {\n                        this.nextPage = null;\n                    }\n                };\n\n                this.displayPage = function (pageId) {\n                    for (let i = 0; i < this.pagesArray.length; i++) {\n                        const page = this.pagesArray[i];\n                        if (page.id == pageId) {\n                            //this.clearLoadedState();\n                            this.displayPageByIndex(i);\n                            break;\n                        }\n                    }\n                };\n\n                this.setCurrentPageByIndex = function (index) {\n                    \n                    this.currentPageIndex = index;\n                    console.log('set page index: ' + index);\n                    \n                    this.currentPage = this.pagesArray[index];\n                    console.log('set current page ' + this.currentPage.id);\n                    window.location.href = '#' + this.currentPage.id;\n\n                };\n\n                this.setCurrentPage = function(pageId){\n                    for (let i = 0; i < this.pagesArray.length; i++) {\n                        const page = this.pagesArray[i];\n                        if (page.id == pageId) {\n                            //this.clearLoadedState();\n                            this.setCurrentPageByIndex(i);\n                            break;\n                        }\n                    }\n                };\n\n                this.clearLoadedState = function() {\n                    this.pagesArray.forEach(function(page){\n                        page.unload();\n                    });\n                };\n\n                this.init = function() {\n                    if (pageIndicatorId != null) {\n                        this.pageIndicator = document.getElementById(pageIndicatorId);\n                    }\n                    \n                    if (null != this.pagesArray && this.pagesArray.length > 1) {\n                        this.clearLoadedState();\n                        if (currentId != null) {\n                            this.displayPage(currentId);\n                        } else {\n                            this.displayPageByIndex(0);\n                        }\n                        \n                    }\n                };\n                this.init();\n\n                this.scrollToNextPage = function() {\n                    if (this.currentPageIndex == this.pagesArray.length - 1) {\n                        return;\n                    }\n                    \n                    console.log('increase current page index');\n                    this.currentPageIndex += 1;\n                    this.setCurrentPageByIndex(this.currentPageIndex);\n\n                };\n\n                this.scrollToPrevPage = function() {\n                    if (this.currentPageIndex == 0) {\n                        return;\n                    }\n                    console.log('decrease current page index');\n                    \n                    this.currentPageIndex -= 1;\n                    this.setCurrentPageByIndex(this.currentPageIndex); \n                };\n\n                \n            }\n            // SCROLL MANAGER DEFINITION END\n\n            \n\n            let mainElem = document.querySelector(\".main\");\n            \n            // left: 37, up: 38, right: 39, down: 40,\n            // spacebar: 32, pageup: 33, pagedown: 34, end: 35, home: 36\n            let keysPrev = { 38: 1, 33: 1};\n            let keysNext = { 40: 1, 34: 1};\n\n            //let baseHashUrl = \"#\";\n\n            let lastScrollTime = 0;\n\n            // initialize variable by hashtag from url if it present\n            let currentHashtag = window.location.hash.substr(1);\n            if (currentHashtag.length == 0) {\n                currentHashtag = null;\n            }\n\n            let scrollManager = null;\n            if (pageScroll) {\n                scrollManager = new ScrollManager([\n                    new Page('main', 'Главная'),\n                    new Page('advantages', 'Преимущества'),\n                    new Page('assortment', 'Ассортимент'),\n                    new Page('mission', 'Миссия'),\n                    new Page('faq', 'Вопрос-Ответ'),\n                    new Page('buy', 'Где купить?'),\n                    new Page('consultation', 'Консультация')\n                ], currentHashtag, 'page-indicator');\n            }\n          \n            //let allBlocks = document.querySelectorAll(\".page\");\n            \n            let mq = null;\n            // media query event handler\n            if (window.matchMedia) {\n                mq = window.matchMedia(\"(min-width: 1025px)\");\n                mq.addListener(WidthChange);\n                WidthChange(mq);\n            }\n\n            // media query change\n            function WidthChange(mq) {\n\n                // window width is at least 1025px\n                mainElem.classList.add(\"stop-scrolling\");\n\n                // CUSTOM EVENT HANDLERS FOR SCROLL AND NAVIGATION\n                document.onkeydown = customScrollKeysHandler;\n                \n                // IE fix for onhashchange\n                if(!window.HashChangeEvent)(function(){\n                    var lastURL=document.URL;\n                    window.addEventListener(\"hashchange\",function(event){\n                        Object.defineProperty(event,\"oldURL\",{enumerable:true,configurable:true,value:lastURL});\n                        Object.defineProperty(event,\"newURL\",{enumerable:true,configurable:true,value:document.URL});\n                        lastURL=document.URL;\n                    });\n                }());\n                window.onhashchange = hashUrlChangeHandler;\n\n                // add custom scroll only for devices with screen more than 1025px\n                if (mq.matches) {\n                    if (pageScroll) {\n                        addWheelListener( window, customScrollWheelHandler, false);\n                    }\n                    \n                    // add drag handlers for scrollable blocks\n                    let scrollBlocks = document.querySelectorAll(\".page .scroll-block\");\n                    Array.prototype.forEach.call(scrollBlocks, function(scrollBlock){\n                        addWheelListener( scrollBlock, customScrollForScrollable, true);\n                        scrollBlock.classList.add(\"dragscroll\");\n                    });\n                } else {\n                    // window width is less than 1025px\n                    //window.ontouchmove = customScrollTouchHandler;\n                    ontouch(window, customScrollTouchHandler, true);\n                }\n            }\n\n            function customScrollKeysHandler(e) {\n                if (keysPrev[e.keyCode]) {\n                    e.preventDefault();\n                    //scrollToPrevBlock();\n                    scrollManager.scrollToPrevPage();\n                } else if (keysNext[e.keyCode]) {\n                    e.preventDefault();\n                    //scrollToNextBlock();\n                    scrollManager.scrollToNextPage();\n                }\n            }\n\n            function customScrollWheelHandler(e) {\n                if (pageScroll) {\n                    //limit handling rate to prevent scrolling trough all pages\n                    if (Date.now() - lastScrollTime > 1400) {\n                        if (e.deltaY > 0) {\n                            //scrollToNextBlock();\n                            scrollManager.scrollToNextPage();\n                        } else if (e.deltaY < 0) {\n                            //scrollToPrevBlock();\n                            scrollManager.scrollToPrevPage();\n                        }\n\n                        lastScrollTime = Date.now();\n                    }\n                }\n                \n            }\n\n            function customScrollForScrollable(e) {\n                e.cancelBubble = true;\n                customScrollWheelHandler(e);  \n            }\n\n            function customScrollTouchHandler(evt, dir, phase, swipetype, distance) {\n                // https://gist.github.com/SleepWalker/da5636b1abcbaff48c4d\n                if (pageScroll) {\n                    if (phase == \"end\") {\n                        if (swipetype == \"left\") {\n                            scrollManager.scrollToNextPage();\n                        } else if (swipetype == \"right\") {\n                            scrollManager.scrollToPrevPage();\n                        }\n                    }\n                }\n                \n            }\n\n            // called when user navigates back or clicks on link\n            function hashUrlChangeHandler(event) {\n                if (event.newURL != event.oldURL) {\n                    let newUrlId = window.location.hash.substr(1);\n                    let oldUrlId = event.oldURL.split('#')[1];\n\n                    scrollManager.displayPage(newUrlId);\n                }\n            }\n            \n            \n        //}\n\n        // FILTER FOR ASSORTMENT\n        /** Assortment filter oject to handle filter states \n         * and functionality */\n        function AssortmentFilter(){\n            this.surface = [];\n            this.absorbtion = [];\n            this.quantity = [];\n            this.filterArray = [];\n\n            this.surfaceTypes = {\n                grid: [\"1\",\"2\"],\n                soft: [\"0\",\"3\",\"4\",\"5\"]\n            };\n            this.absorbLevels = {\n                one: [\"5\"],\n                two: [\"0\"],\n                three: [\"1\",\"2\",\"3\",\"4\"],\n                four: [\"1\"],\n                five: [\"2\",\"3\",\"4\"]\n            };\n            this.quantities = {\n                six: [\"4\"],\n                eight: [\"3\"],\n                ten: [\"0\",\"1\",\"2\"],\n                twenty: [\"5\"]\n            };\n            \n\n            this.save = function(array) {\n                localStorage.setItem(\"assortmentFilter\", array);\n            };\n\n            this.load = function() {\n                let lsValue = localStorage.getItem(\"assortmentFilter\");\n                this.filterArray = lsValue != null ? lsValue : []; \n\n                this.apply(this.filterArray);\n            };\n\n            this.arrayDiff = function(array1, array2) {\n                return array1.filter(function(i) {\n                    return array2.indexOf(i) < 0;\n                });\n            };\n\n            this.arrayIntersect = function(array1, array2) {\n                //console.log(\"Intersect input: [\" + array1 + \"] | [\" + array2 + \"]\");\n                let result = [];\n                if (array1.length === 0) {\n                    result = array2.slice();\n                    return result;\n                } else if (array2.length === 0) {\n                    result = array1.slice();\n                    return result;\n                } \n\n                if (array1.length > array2.length) {\n                    return array1.filter(function(i) {\n                        return array2.indexOf(i) >= 0;\n                    });\n                } else {\n                    return array2.filter(function(i) {\n                        return array1.indexOf(i) >= 0;\n                    });\n                }\n                \n            }\n\n            this.mergeFilters = function() {\n                // push into filterArray only values, that are common to merging arrays\n                let tempArray = [];\n                let exist1time = [];\n                let exist2times = [];\n                let exist3times = [];\n                //tempArray = this.arrayIntersect(this.arrayIntersect(this.absorbtion, this.quantity), this.surface);\n\n                /*ALTERNATIVE IMPLEMENTATION*/\n                tempArray = this.surface.slice().concat(this.absorbtion.slice()).concat(this.quantity.slice());\n                //console.log(\"Merged Array: \" + tempArray);\n                tempArray.sort();\n                let offset = 0;\n                let iter = 0;\n                while (iter < tempArray.length) {\n                    if (tempArray[iter] == tempArray[iter + 2]) {\n                        exist3times.push(tempArray[iter]);\n                        offset = 3;\n                    } else if (tempArray[iter] == tempArray[iter + 1]) {\n                        exist2times.push(tempArray[iter]);\n                        offset = 2;\n                    } else {\n                        exist1time.push(tempArray[iter]);\n                        offset = 1;\n                    }\n                    \n                    iter += offset;\n                }\n\n                console.log(\"exist1time: \" + exist1time);\n                console.log(\"exist2times: \" + exist2times);\n                console.log(\"exist3times: \" + exist3times);\n                if (exist3times.length > 0) {\n                    tempArray = exist3times;\n                } else if (exist2times.length > 0) {\n                    tempArray = exist2times;\n                } else {\n                    tempArray = exist1time;\n                }\n\n                return tempArray;\n            };\n\n            /** resets assortment filter */\n            this.reset = function() {\n                this.filterArray.length = 0;\n                $slider.slick(\"slickUnfilter\");\n                $slider.slick(\"slickGoTo\", 0, true);\n                localStorage.removeItem(\"assortmentFilter\");\n            };\n\n            /** Calls slick slider filter() method.\n             * @param {array} indexesArray - array of slick slider indexes\n             */\n            this.apply = function(indexesArray) {\n                $slider.slick(\"slickUnfilter\");\n                \n                if (indexesArray.length > 0) {\n                    $slider.slick(\"slickFilter\", function(index){\n                        return ($.inArray($(this).attr(\"data-slick-index\"), indexesArray) != -1);\n                    });\n                }\n                this.save(indexesArray);\n            };\n\n            /** adds array to assortment filter \n             * @param {string} option Indicates filter group and passed from data-filter-option attribute\n             * @param {array} array Array of elements to display from data-filter-value.\n             * @param {boolean} subtract Indicates that option is unselected and we need to subtract array \n            */\n            this.add = function(option, array, subtract, noresultCallback) {\n                // add array for same group\n                // subtract if unchecked\n                switch (option) {\n                    case \"surface\":\n                        if (subtract === true) {\n                            this.surface = this.arrayDiff(this.surface, array);\n                        } else {\n                            this.surface = this.surface.concat(array);\n                        }\n                        break;\n                    case \"absorb\":\n                        if (subtract === true) {\n                            this.absorbtion = this.arrayDiff(this.absorbtion, array);\n                        } else {\n                            this.absorbtion = this.absorbtion.concat(array);\n                        }\n                        \n                        break;\n                    case \"quantity\":\n                        if (subtract === true) {\n                            this.quantity = this.arrayDiff(this.quantity, array);\n                        } else {\n                            this.quantity = this.quantity.concat(array);\n                        }\n                        break;\n                    default:\n                        break;\n                }\n                \n                // find intersection for different groups\n                this.filterArray = this.mergeFilters();\n\n                console.log(\"filterArray after merging: \" + this.filterArray);\n\n                let noOptionsSelected = false;\n                if (this.surface.length == 0 && this.absorbtion.length == 0 && this.quantity.length == 0) {\n                    noOptionsSelected = true;\n                }\n\n                if (!noOptionsSelected) {\n                    if (this.filterArray.length <= 0) {\n                        if (noresultCallback) {\n                            noresultCallback();\n                            return;\n                        }\n                        \n                    }\n                }\n                \n\n                this.apply(this.filterArray);\n\n            };\n        }\n        \n    });\n\n\n    let cachedWidth = window.innerWidth;\n\n    function windowSize() {\n        let winWidth = window.innerWidth,\n            docWidth = $(document).width();\n\n        scrollBar(true);\n\n        // Resize Mobile\n        if (winWidth !== cachedWidth) {\n\n\n            cachedWidth = winWidth;\n        }\n\n    };\n\n    (function getPerspective(){\n        var element = document.createElement('p'),\n            html = document.getElementsByTagName('HTML')[0],\n            body = document.getElementsByTagName('BODY')[0],\n            propertys = {\n                'webkitTransformStyle':'-webkit-transform-style',\n                'MozTransformStyle':'-moz-transform-style',\n                'msTransformStyle':'-ms-transform-style',\n                'transformStyle':'transform-style'\n            };\n\n        body.insertBefore(element, null);\n\n        for (var i in propertys) {\n            if (element.style[i] !== undefined) {\n                element.style[i] = \"preserve-3d\";\n            }\n        }\n\n        var st = window.getComputedStyle(element, null),\n            transform = st.getPropertyValue(\"-webkit-transform-style\") ||\n                        st.getPropertyValue(\"-moz-transform-style\") ||\n                        st.getPropertyValue(\"-ms-transform-style\") ||\n                        st.getPropertyValue(\"transform-style\");\n\n        if(transform!=='preserve-3d'){\n          html.className += 'no-preserve-3d';\n        }\n        document.body.removeChild(element);\n\n    }());\n\n    // ScrollBar\n    function scrollBar(update) {\n        let $scroll = $(\".scroll-block\");\n\n        if ($scroll.length && window.innerWidth > 767) {\n\n            if (update) {\n                $scroll.perfectScrollbar(\"update\");\n            } else {\n                $scroll.perfectScrollbar({\n                    wheelSpeed: 0.9,\n                    wheelPropagation: false,\n                    minScrollbarLength: 20\n                });\n            }\n        }\n    }\n\n    // Click Out\n    function ClickOut(element) {\n        this.element = element;\n\n        this.removeClass = function (class_) {\n            $(document).on(\"click\", function (event) {\n                if ($(event.target).closest(element).length) return;\n                $(element).removeClass(class_);\n                event.stopPropagation();\n            });\n        };\n    };\n\n    // forEach for IE\n    (function () {\n        if (typeof NodeList.prototype.forEach === \"function\") return false;\n        NodeList.prototype.forEach = Array.prototype.forEach;\n    }());\n    \n    // Find Parent\n    function findParent(el, cls){\n       while ((el = el.parentElement) && !el.classList.contains(cls));\n       return el;\n    }\n\n\n    /*********************************\n     * UNIVERSAL MOUSE WHEEL HANDLER \n     *********************************/\n\n    // creates a global \"addWheelListener\" method\n    // example: addWheelListener( elem, function( e ) { console.log( e.deltaY ); e.preventDefault(); } );\n    let prefix = \"\", _addEventListener, support;\n\n    // detect event model\n    if (window.addEventListener) {\n        _addEventListener = \"addEventListener\";\n    } else {\n        _addEventListener = \"attachEvent\";\n        prefix = \"on\";\n    }\n\n    // detect available wheel event\n    support = \"onwheel\" in document.createElement(\"div\") ? \"wheel\" : // Modern browsers support \"wheel\"\n        document.onmousewheel !== undefined ? \"mousewheel\" : // Webkit and IE support at least \"mousewheel\"\n            \"DOMMouseScroll\"; // let's assume that remaining browsers are older Firefox\n\n    window.addWheelListener = function (elem, callback, useCapture) {\n        _addWheelListener(elem, support, callback, useCapture);\n\n        // handle MozMousePixelScroll in older Firefox\n        if (support == \"DOMMouseScroll\") {\n            _addWheelListener(elem, \"MozMousePixelScroll\", callback, useCapture);\n        }\n    };\n\n    function _addWheelListener(elem, eventName, callback, useCapture) {\n        elem[_addEventListener](prefix + eventName, support == \"wheel\" ? callback : function (originalEvent) {\n            !originalEvent && (originalEvent = window.event);\n\n            // create a normalized event object\n            let event = {\n                // keep a ref to the original event object\n                originalEvent: originalEvent,\n                target: originalEvent.target || originalEvent.srcElement,\n                type: \"wheel\",\n                deltaMode: originalEvent.type == \"MozMousePixelScroll\" ? 0 : 1,\n                deltaX: 0,\n                deltaY: 0,\n                deltaZ: 0,\n                preventDefault: function () {\n                    originalEvent.preventDefault ?\n                        originalEvent.preventDefault() :\n                        originalEvent.returnValue = false;\n                }\n            };\n\n            // calculate deltaY (and deltaX) according to the event\n            if (support == \"mousewheel\") {\n                event.deltaY = - 1 / 40 * originalEvent.wheelDelta;\n                // Webkit also support wheelDeltaX\n                originalEvent.wheelDeltaX && (event.deltaX = - 1 / 40 * originalEvent.wheelDeltaX);\n            } else {\n                event.deltaY = originalEvent.deltaY || originalEvent.detail;\n            }\n\n            // it's time to fire the callback\n            return callback(event);\n\n        }, {passive: true}, useCapture || false);\n    }\n\n    /************************************\n     * SWIPE HANDLER (Returns direction) \n     ************************************/\n    // http://www.javascriptkit.com/javatutors/touchevents3.shtml\n    function ontouch(el, callback, capture){\n \n        var touchsurface = el,\n        dir,\n        swipeType,\n        startX,\n        startY,\n        distX,\n        distY,\n        threshold = 150, //required min distance traveled to be considered swipe\n        restraint = 50, // maximum distance allowed at the same time in perpendicular direction\n        allowedTime = 500, // maximum time allowed to travel that distance\n        elapsedTime,\n        startTime,\n        handletouch = callback || function(evt, dir, phase, swipetype, distance){}\n     \n        touchsurface.addEventListener('touchstart', function(e){\n            var touchobj = e.changedTouches[0]\n            dir = 'none'\n            swipeType = 'none'\n            dist = 0\n            startX = touchobj.pageX\n            startY = touchobj.pageY\n            startTime = new Date().getTime() // record time when finger first makes contact with surface\n            handletouch(e, 'none', 'start', swipeType, 0) // fire callback function with params dir=\"none\", phase=\"start\", swipetype=\"none\" etc\n            //e.preventDefault()\n     \n        }, capture || false)\n     \n        touchsurface.addEventListener('touchmove', function(e){\n            var touchobj = e.changedTouches[0]\n            distX = touchobj.pageX - startX // get horizontal dist traveled by finger while in contact with surface\n            distY = touchobj.pageY - startY // get vertical dist traveled by finger while in contact with surface\n            if (Math.abs(distX) > Math.abs(distY)){ // if distance traveled horizontally is greater than vertically, consider this a horizontal movement\n                dir = (distX < 0)? 'left' : 'right'\n                handletouch(e, dir, 'move', swipeType, distX) // fire callback function with params dir=\"left|right\", phase=\"move\", swipetype=\"none\" etc\n            }\n            else{ // else consider this a vertical movement\n                dir = (distY < 0)? 'up' : 'down'\n                handletouch(e, dir, 'move', swipeType, distY) // fire callback function with params dir=\"up|down\", phase=\"move\", swipetype=\"none\" etc\n            }\n            //e.preventDefault() // prevent scrolling when inside DIV\n        }, capture || false)\n     \n        touchsurface.addEventListener('touchend', function(e){\n            var touchobj = e.changedTouches[0]\n            elapsedTime = new Date().getTime() - startTime // get time elapsed\n            if (elapsedTime <= allowedTime){ // first condition for awipe met\n                if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint){ // 2nd condition for horizontal swipe met\n                    swipeType = dir // set swipeType to either \"left\" or \"right\"\n                }\n                else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint){ // 2nd condition for vertical swipe met\n                    swipeType = dir // set swipeType to either \"top\" or \"down\"\n                }\n            }\n            // Fire callback function with params dir=\"left|right|up|down\", phase=\"end\", swipetype=dir etc:\n            handletouch(e, dir, 'end', swipeType, (dir =='left' || dir =='right')? distX : distY)\n            //e.preventDefault()\n        }, capture || false)\n    }\n     \n    // USAGE:\n    /*\n    ontouch(el, function(evt, dir, phase, swipetype, distance){\n     // evt: contains original Event object\n     // dir: contains \"none\", \"left\", \"right\", \"top\", or \"down\"\n     // phase: contains \"start\", \"move\", or \"end\"\n     // swipetype: contains \"none\", \"left\", \"right\", \"top\", or \"down\"\n     // distance: distance traveled either horizontally or vertically, depending on dir value\n     \n     if ( phase == 'move' && (dir =='left' || dir == 'right') )\n      console.log('You are moving the finger horizontally by ' + distance)\n    })\n    */\n\n}(jQuery))\n\n\n"]}