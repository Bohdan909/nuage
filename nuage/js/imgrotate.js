function rotatingImageError(rotError,useThrow){rotError={name:"RotatingImage error",message:rotError,description:rotError},useThrow?eval("throw(rotError)"):alert(rotError.name+": "+rotError.message)}function getRotPositionFromEvent(t){if(void 0!==t.pageX)return[t.pageX,t.pageY];var e=t.clientX,o=t.clientY;return document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[e+document.documentElement.scrollLeft,o+document.documentElement.scrollTop]:[e+document.body.scrollLeft,o+document.body.scrollTop]}function RotatingImage(t,e,o,i,n,r,a,s,m,h){var u="";if(this.startAutoRot||(u+="\n* Use the 'new' keyword when calling the RotatingImage function."),"string"!=typeof t&&(u+="\n* Image prefix must be a string."),"string"!=typeof e&&(u+="\n* Image extension must be a string."),"string"!=typeof o&&(u+="\n* Image name must be a string."),RotatingImage.prototype.doneImages[o]&&(u+="\n* Image name"+o+" has already been set up ready to rotate. This cannot be done twice for a single image."),(isNaN(i)||i<1||parseInt(i)!=i)&&(u+="\n* Number of images in the rotation must be a whole number >= 1."),(isNaN(n)||n<1||parseInt(n)!=n)&&(u+="\n* Number of tilt angles must be a whole number >= 1."),(isNaN(r)||r<1||r>i||parseInt(r)!=r)&&(u+="\n* Current rotation must be a whole number between 1 and the number of images in the rotation."),(isNaN(a)||a<1||a>n||parseInt(a)!=a)&&(u+="\n* Current tilt must be a whole number between 1 and the number of tilt angles."),u)rotatingImageError(u,h);else{RotatingImage.prototype.doneImages[o]=!0,this.imgPrefix=t,this.imgExt=e,this.imgName=o,this.numRot=i,this.numTilt=n,this.curRot=r,this.curTilt=a,this.useThrow=h,this.rotInterval=0,this.tiltInterval=0,this.pausedX=!1,this.pausedY=!1,this.preloadComplete=!1,this.imagesLoaded=0,this.imageCache=[];for(var g=this,l=1;l<=i;l++){this.imageCache[l]=[];for(var c=1;c<=n;c++)this.imageCache[l][c]=new Image,this.imageCache[l][c].onload=function(t){return function(){t.alreadyload||(t.alreadyload=!0,g.imagesLoaded++,s&&s(g.imagesLoaded/(g.numRot*g.numTilt)),g.imagesLoaded==g.numRot*g.numTilt&&(m&&m(),g.preloadComplete=!0))}}(this.imageCache[l][c]),this.imageCache[l][c].onerror=function(){this.onload()},this.imageCache[l][c].src=this.imgPrefix+"_"+l+"_"+c+this.imgExt,this.imageCache[l][c].complete&&this.imageCache[l][c].onload()}}}RotatingImage.prototype.doneImages={},RotatingImage.prototype.redraw=function(){(this.image||(this.image=document.images[this.imgName],this.image))&&(this.image.src=this.imageCache[this.curRot][this.curTilt].src)},RotatingImage.prototype.startAutoTilt=function(t,e){var o=this;this.numTilt<2?rotatingImageError("AutoTilt can only be used if more than one tilt angles are being used.",this.useThrow):isNaN(t)||t<10||parseInt(t)!=t?rotatingImageError("AutoTilt needs to be passed an integer greater than 10 to use as the stepping interval.",this.useThrow):(this.stopAutoTilt(),this.tiltDirection=e,this.tiltInterval=setInterval(function(){o.preloadComplete&&!o.pausedY&&(o.image||document.images[o.imgName])&&(o.tiltDirection&&o.curTilt==o.numTilt&&(o.tiltDirection=!1),o.tiltDirection||1!=o.curTilt||(o.tiltDirection=!0),o.tiltDirection?o.tiltUp(!0):o.tiltDown(!0))},t))},RotatingImage.prototype.stopAutoTilt=function(){this.tiltInterval&&(clearInterval(this.tiltInterval),this.tiltInterval=0)},RotatingImage.prototype.startAutoRot=function(t,e){var o=this;isNaN(t)||t<10||parseInt(t)!=t?rotatingImageError("AutoRotate needs to be passed an integer greater than 10 to use as the stepping interval.",this.useThrow):(this.stopAutoRot(),this.rotDirection=e,this.rotInterval=setInterval(function(){o.preloadComplete&&!o.pausedX&&(o.image||document.images[o.imgName])&&(o.rotDirection?o.rotateUp(!0):o.rotateDown(!0))},t))},RotatingImage.prototype.stopAutoRot=function(){this.rotInterval&&(clearInterval(this.rotInterval),this.rotInterval=0)},RotatingImage.prototype.tiltTo=function(t,e){e||this.stopAutoTilt(),isNaN(t)||t<1||t>this.numTilt||parseInt(t)!=t?rotatingImageError("tiltTo number must be a whole number between 1 and the number of tilt angles.",this.useThrow):(this.curTilt=t,this.redraw())},RotatingImage.prototype.tiltUp=function(t){t||this.stopAutoTilt(),this.curTilt<this.numTilt&&(this.curTilt++,this.redraw())},RotatingImage.prototype.tiltDown=function(t){t||this.stopAutoTilt(),this.curTilt>1&&(this.curTilt--,this.redraw())},RotatingImage.prototype.rotateTo=function(t,e){e||this.stopAutoRot(),isNaN(t)||t<1||t>this.numRot||parseInt(t)!=t?rotatingImageError("rotateTo number must be a whole number between 1 and the number of images in the rotation.",this.useThrow):(this.curRot=t,this.redraw())},RotatingImage.prototype.rotateUp=function(t){t||this.stopAutoRot(),this.curRot++,this.curRot>this.numRot&&(this.curRot=1),this.redraw()},RotatingImage.prototype.rotateDown=function(t){t||this.stopAutoRot(),this.curRot--,this.curRot||(this.curRot=this.numRot),this.redraw()},RotatingImage.prototype.setPanning=function(t,e,o,i){var n=this;if(this.image||(this.image=document.images[this.imgName],this.image)){if(!t&&!e)return this.image.onmousedown=null,void(this.image.style&&(this.image.style.cursor=""));this.image.style&&(this.image.style.cursor="move"),this.image.ondragstart=function(){return!1},this.image.onselectstart=function(){return!1},this.image.onmousedown=function(r){if(r||(r=window.event),!r)return!0;if(r.button>1||r.which>1)return!0;n.curtRot,n.curtTilt;var a=getRotPositionFromEvent(r),s=document.onmouseup,m=[0,0];return this.onmousemove=function(r){r||(r=window.event);var s=[this.width/(n.numRot/2),this.height/n.numTilt],h=getRotPositionFromEvent(r);if(s[2]=s[0]=Math.round((h[0]-a[0])/s[0]),s[3]=s[1]=Math.round((h[1]-a[1])/s[1]),t){for(o&&n.stopAutoRot(),n.pausedX=!0;s[0]>m[0];)n.rotateDown(!o),s[0]--;for(;s[0]<m[0];)n.rotateUp(!o),s[0]++}if(e){for(i&&n.stopAutoTilt(),n.pausedY=!0;s[1]>m[1];)n.tiltDown(!i),s[1]--;for(;s[1]<m[1];)n.tiltUp(!i),s[1]++}m=[s[2],s[3]]},document.onmouseup=function(){n.pausedX=!1,n.pausedY=!1,n.image.onmousemove=null,document.onmouseup=s},!1}}else rotatingImageError("Panning cannot be allowed until after the image has been created.",this.useThrow)},RotatingImage.prototype.setupZoomInformation=function(){if(this.image||(this.image=document.images[this.imgName],this.image)){if(!this.rotZoomDetails){if(!this.image.height&&!this.image.width)return void rotatingImageError("Images cannot be zoomed until after they have loaded.",this.useThrow);this.rotZoomDetails={height:this.image.height,width:this.image.width,zoom:100}}}else rotatingImageError("Images cannot be zoomed until after they have been created.",this.useThrow)},RotatingImage.prototype.zoomImageIn=function(t,e){if(this.setupZoomInformation(),!this.rotZoomDetails)return 0;var o=this.rotZoomDetails.zoom+t;return o>e&&(o=e),this.zoomImageTo(o),o},RotatingImage.prototype.zoomImageOut=function(t,e){if(this.setupZoomInformation(),!this.rotZoomDetails)return 0;var o=this.rotZoomDetails.zoom-t;return o<e&&(o=e),this.zoomImageTo(o),o},RotatingImage.prototype.zoomImageTo=function(t){this.setupZoomInformation(),this.rotZoomDetails&&(isNaN(t)||t<0?rotatingImageError("A positive number must be used when zooming.",this.useThrow):(this.image.height=Math.round(this.rotZoomDetails.height*(t/100)),this.image.width=Math.round(this.rotZoomDetails.width*(t/100)),this.rotZoomDetails.zoom=t))},RotatingImage.prototype.getTilt=function(){return this.curTilt},RotatingImage.prototype.getNumTilt=function(){return this.numTilt},RotatingImage.prototype.getRotation=function(){return this.curRot},RotatingImage.prototype.getNumRotation=function(){return this.numRot};
//# sourceMappingURL=imgrotate.js.map
