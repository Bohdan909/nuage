{"version":3,"sources":["rotate.js"],"names":["$","defOptions","source","ext","count","speed","auto","fn","rotate3d","options","base","this","clickPosition","currentIndex","images","image","animateEnd","i","img","Image","src","push","moveHandler","e","offset","clientX","Math","abs","attr","upHandler","document","off","imageAttr","timer","animateReverseEnd","animateBackEnd","autoPlay","window","requestAnimationFrame","change","console","log","length","clearInterval","changeImgReverse","changeImgBack","on","animateOpenEnd","animateCloseEnd","isOpened","isHovered","animateOpen","reset","callback","startTime","Date","getTime","currentTicks","animateClose","hasClass","hoverArea","children","setTimeout","append","find","jQuery"],"mappings":"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","file":"rotate.js","sourcesContent":["(function ( $ ) {\n\tdefOptions = {\n\t\t'source': 'images/object/',\n\t\t'ext' : '.png',\n\t\t'count' : 70,\n\t\t'speed': 5,\n\t\t\"auto\" : false\n\t},\n\n\t$.fn.rotate3d = function(options) {\n\t\tvar base = this;\n\t\t// Set options\n\t\tif (!options.source) options.source = defOptions.source;\n\t\tif (!options.ext) options.ext = defOptions.ext;\n\t\tif (!options.count) options.count = defOptions.count;\n\t\tif (!options.speed) options.speed = defOptions.speed;\n\t\tif (!options.auto) options.auto = defOptions.auto;\n\n\t\tvar clickPosition = null,\n\t\t\tcurrentIndex = 0,\n\t\t\timages = [],\n\t\t\timage = null,\n\t\t\tanimateEnd = false;\n\n\n\t\t// Load images\n\t\tfor (var i = 0; i <= options.count; ++i){\n\t\t\tvar img = new Image();\n\t\t\timg.src = options.source + i + options.ext;\n\t\t\timages.push(img);\n\t\t}\n\n\t\t// Move\n\t\tbase.moveHandler = function(e) {\n\t\t\tvar offset = e.clientX - clickPosition;\n\n\t\t\tif (Math.abs(offset) > options.speed) {\n\t\t\t\tclickPosition = e.clientX;\n\t\t\t\tcurrentIndex = currentIndex + (1 * (offset / Math.abs(offset)));\n\n\t\t\t\tif(currentIndex >= options.count) currentIndex = 0;\n\t\t\t\tif(currentIndex < 0) currentIndex = options.count;\n\n\t\t\t\timage.attr('src', images[currentIndex].src);\n\t\t\t}\n\t\t}\n\n\t\tbase.upHandler = function(e){\n\t\t\t$(document).off('mousemove', base.moveHandler);\n\t\t}\n\n\t\tbase.imageAttr = function (i){\n\t\t\timage.attr('src', images[i].src);\n\t\t}\n\n\t\tvar animateReverseEnd = false, \n\t\tanimateBackEnd = false, \n\t\tautoplayEnd = false, \n\t\ttimer;\n\n\t\t// Autoplay\t\n\t\tbase.autoPlay = function(){\n\t\t\tlet i = 0;\n\n\t\t\tif (options.auto){\n\n\t\t\t\tfunction change(){\n\t\t\t\t\tbase.imageAttr(i);\n\t\t\t\t\ti++;\n\n\t\t\t\t\tconsole.log(\"Auto: go_____\");\n\n\t\t\t\t\tif (i >= images.length){\n\t\t\t\t\t\tclearInterval(timer);\t\t\n\t\t\t\t\t    animateEnd = true;\n\t\t\t\t\t    animateBackEnd = true;\n\t\t\t\t\t    animateReverseEnd = true;\n\n\t\t\t\t\t    console.log(\"Auto: \" + animateEnd);\n\t\t\t\t\t} else {window.requestAnimationFrame(change);}\n\t\t\t\t}\n\n\t\t\t\t//var timer = setInterval(change, 20);\n\t\t\t\twindow.requestAnimationFrame(change);\n\t\t\t}\n\t\t}\n\n\t\t// Reverse\n\t\tbase.changeImgReverse = function(){\n\t\t\tlet i = options.count;\n\n\t\t\tfunction change(){\n\t\t\t\tbase.imageAttr(i);\n\t\t\t    i--;\n\n\t\t\t    console.log(\"Reverse: go_____\");\n\t\t\t    animateReverseEnd = false;\n\n\t\t\t\tif (i < (options.count - options.count*0.4)){\n\t\t\t\t\tclearInterval(timer);\t\t\n\t\t\t\t\tanimateReverseEnd = true;\n\t\t\t\t \tif (!animateBackEnd) changeImgBack();console.log(\"- AUTOBACK -\");\n\t\t\t\t \tconsole.log(\"Reverse: \" + animateReverseEnd);\n\t\t\t\t} else {window.requestAnimationFrame(change);}\n\t\t\t}\t\t\n\n\t\t\t//var timer = setInterval(change, 50);\n\t\t\twindow.requestAnimationFrame(change);\n\t\t}\n\n\t\t// Back\n\t\tbase.changeImgBack = function(){\n\t\t\tlet i = options.count - options.count*0.4;\n\n\t\t\tfunction change(){\n\t\t\t\tbase.imageAttr(i);\n\t\t\t\ti++;\n\n\t\t\t\tconsole.log(\"Back: go_____\");\n\t\t\t\tanimateBackEnd = false;\n\n\t\t\t\tif (i >= images.length){\n\t\t\t\t\tclearInterval(timer);\t\n\n\t\t\t\t\tanimateBackEnd = true;\n\t\t\t\t\tanimateReverseEnd = true;\n\n\t\t\t\t\t//console.log(\"Back: \" + animateEnd);\n\t\t\t\t} else {window.requestAnimationFrame(change);}\n\t\t\t}\n\n\t\t\t//var timer = setInterval(change, 50);\n\t\t\twindow.requestAnimationFrame(change);\n\t\t}\n\t\t\n\n\t\t// Init\n\t\t$(this).on('drag', function () {\n\t\t\treturn false;\n\t\t});\n\n\t\t$(this).on('dragdrop', function () {\n\t\t\treturn false;\n\t\t});\n\n\t\t$(this).on('dragstart', function () {\n\t\t\treturn false;\n\t\t});\n\n\t\tvar naviv = false;\n\n\t\t// AUTO\n\t\t/*\n\t\t$(\".object-auto\").on(\"mouseover\", function(){\n\t\t\tif (!animateBackEnd) console.log(\"NAVIV\");\n\t\t\tif (animateEnd && animateReverseEnd && animateBackEnd) changeImgReverse();\n\t\t\tanimateReverseEnd = false;\n\t\t});\n\n\t\t$(\".object-auto\").on(\"mouseleave\", function(){\n\t\t\tif (animateEnd && animateReverseEnd && animateBackEnd) changeImgBack();\n\t\t\tconsole.log(\"- LEAVE -\");\n\t\t\tanimateBackEnd = false;\n\t\t});\n\t\t*/\n\n\n\t\t// HOVER\n\t\tbase.animateOpenEnd  = true;\n\t\tbase.animateCloseEnd = true;\n\t\tbase.isOpened = false;\n\t\tbase.isHovered = false;\n\n        ////////// MAIN OBJECT //////////\n\n        // Open\n        base.animateOpen = function(reset, callback){\n\t\t\tif (reset) {\n\t\t\t\tbase.isOpened = false;\n\t\t\t}\n\t\t\tif (!base.animateOpenEnd || !base.animateCloseEnd || base.isOpened) {\n\t\t\t\t//console.log(base.selector + \" postpone Open animation\");\n\t\t\t\t\n\t\t\t\t//setTimeout( base.animateOpen, 2000);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbase.animateOpenEnd = false;\n\t\t\tlet i = 0;\n\t\t\tlet startTime = null;\n\n            function change(){\n\t\t\t\tif (!startTime) startTime = (new Date()).getTime();\t\t\t\t\n\t\t\t\tvar currentTicks = (new Date).getTime();\n\n\t\t\t\tif (currentTicks - startTime >= 30) {\n\t\t\t\t\tstartTime = currentTicks;\n\t\t\t\t\t\n\t\t\t\t\tbase.imageAttr(i);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\n\t\t\t\tif (i >= images.length){\n\t\t\t\t\tclearInterval(timer);       \n\t\t\t\t\tbase.animateOpenEnd = true;\n\t\t\t\t\tbase.isOpened = true;\n\t\t\t\t\t//if (!animateCloseEnd) animateClose();\n\t\t\t\t\t//setTimeout(animateClose, 700);\n\t\t\t\t\tif (callback) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t\t\n\t\t\t\t\t} \n\t\t\t\t} else {window.requestAnimationFrame(change);}\n\n                //console.log(base.selector + \" Open ended: \" + base.animateOpenEnd);\n            }       \n\n\t\t\t//var timer = setInterval(change, 40); \n\t\t\twindow.requestAnimationFrame(change);\n\t\t\t\n\t\t\t\n        }\n\n        // Close\n        base.animateClose = function(){\n\t\t\tif (!base.animateOpenEnd || !base.animateCloseEnd || !base.isOpened || base.isHovered){\n\t\t\t\t//console.log(base.selector + \" postpone Close animation\");\n\n\t\t\t\t//setTimeout( base.animateClose, 2000);\n\t\t\t\treturn;\n\t\t\t} \n\t\t\tbase.animateCloseEnd = false;\n\t\t\tlet i = options.count;\n\t\t\tlet startTime = null;\n\n            function change(){\n\t\t\t\tif (!startTime) startTime = (new Date()).getTime();\t\t\t\t\n\t\t\t\tvar currentTicks = (new Date).getTime();\n\n\t\t\t\tif (currentTicks - startTime >= 30) {\n\t\t\t\t\tstartTime = currentTicks;\n\n\t\t\t\t\tbase.imageAttr(i);\n\t\t\t\t\ti--;\n\t\t\t\t}\n\n                if (i <= 0){\n                    clearInterval(timer);       \n\t\t\t\t\tbase.animateCloseEnd = true;\n\t\t\t\t\tbase.isOpened = false;\n\t\t\t\t} else {window.requestAnimationFrame(change);}\n\t\t\t\t\n                //console.log(base.selector + \" Close ended: \" + base.animateCloseEnd);\n            }       \n\n\t\t\t//var timer = setInterval(change, 40);\n\t\t\twindow.requestAnimationFrame(change);\n        }\n\n        // if ($(\".page\").is(\".page-main\")){\n        // \tsetTimeout(function(){\n\t    //     \tanimateOpen();\t\n\t    //     }, 1500);\n        // }\n        \n\n\t\t////////// END MAIN OBJECT //////////\n\n\t\tif (base.hasClass(\"object-hover\")) {\n\t\t\t\n\t\t\t\n\t\t\tvar hoverArea = base.children(\".hover-area\");\n\t\t\tif(hoverArea.length <= 0) {\n\t\t\t\thoverArea = base;\n\t\t\t}\n\n\t\t\thoverArea.on(\"mouseover\", function(){\n\t\t\t\tbase.isHovered = true;\n\t\t\t\tbase.animateOpen(false);\n\n\t\t\t\t//base.animateOpenEnd = false;\n\t\t\t}); \n\t\n\t\t\thoverArea.on(\"mouseleave\", function(){\n\t\t\t\tbase.isHovered = false;\n\t\t\t\tif (!base.isOpened && !base.animateOpenEnd) {\n\t\t\t\t\tsetTimeout(base.animateClose, 2000);\n\t\t\t\t} else if (base.isOpened && base.animateOpenEnd) {\n\t\t\t\t\tbase.animateClose();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t//base.animateCloseEnd = false;\n\t\t\t}); \n\t\t}\n\t\t\n\t\t\n\n\t\tbase\n\t\t\t.append($('<img>').attr({'src': options.source + currentIndex + options.ext}))\n\t\t\t.find('img')\n\t\t\t.on('mousedown', function(e){\n\t\t\t\tclickPosition = e.clientX;\n\t\t\t\t$(document).on('mousemove', base.moveHandler);\n\t\t\t});\n\n\t\timage = $(this).find('img');\n\t\t//base.autoPlay();\n\n\t\t$(document).on('mouseup', base.upHandler);\n\n\t}\n}(jQuery));\n"]}