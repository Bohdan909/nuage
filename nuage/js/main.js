jQuery(document).ready(function(e){var a=function(e,a){this.element=e,this.handleContainer=this.element.find(".cd-product-viewer-handle"),this.handleFill=this.handleContainer.children(".fill"),this.handle=this.handleContainer.children(".handle"),this.imageWrapper=a,this.slideShow=this.imageWrapper.find(".product-sprite"),this.frames=this.element.data("frame"),this.friction=this.element.data("friction"),this.visibleFrame=0,this.loaded=!1,this.animating=!1,this.xPosition=0,this.loadFrames()};function t(e,a){e.css({"-moz-transform":a,"-webkit-transform":a,"-ms-transform":a,"-o-transform":a,transform:a})}a.prototype.loadFrames=function(){var a=this,t=this.slideShow.data("image"),i=e("<img/>");this.loading("0.5"),i.attr("src",t).load(function(){e(this).remove(),a.loaded=!0}).each(function(){image=this,image.complete&&e(image).trigger("load")})},a.prototype.loading=function(e){var a=this;t(this.handleFill,"scaleX("+e+")"),setTimeout(function(){if(a.loaded)a.element.addClass("loaded"),t(a.handleFill,"scaleX(1)"),a.dragImage(),a.handle&&a.dragHandle();else{var i=parseFloat(e)+.1;i<1?a.loading(i):a.loading(parseFloat(e))}},500)},a.prototype.dragHandle=function(){var e=this;e.handle.on("mousedown vmousedown",function(a){e.handle.addClass("cd-draggable");var t=e.handle.outerWidth(),i=e.handleContainer.offset().left,o=e.handleContainer.outerWidth(),n=i-t/2,s=i+o-t/2;e.xPosition=e.handle.offset().left+t-a.pageX,e.element.on("mousemove vmousemove",function(a){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedHandle(a,t,i,o,n,s)}):setTimeout(function(){e.animateDraggedHandle(a,t,i,o,n,s)},100))}).one("mouseup vmouseup",function(a){e.handle.removeClass("cd-draggable"),e.element.off("mousemove vmousemove")}),a.preventDefault()}).on("mouseup vmouseup",function(a){e.handle.removeClass("cd-draggable")})},a.prototype.animateDraggedHandle=function(a,t,i,o,n,s){var r=a.pageX+this.xPosition-t;r<n?r=n:r>s&&(r=s);var d=Math.ceil(1e3*(r+t/2-i)/o)/10;this.visibleFrame=Math.ceil(d*(this.frames-1)/100),this.updateFrame(),e(".cd-draggable",this.handleContainer).css("left",d+"%").one("mouseup vmouseup",function(){e(this).removeClass("cd-draggable")}),d<15||d>85?e(".product-viewer-wrap").removeClass("product-viewer-back").addClass("product-viewer-front"):d>46&&d<54?e(".product-viewer-wrap").removeClass("product-viewer-front").addClass("product-viewer-back"):e(".product-viewer-wrap").removeClass("product-viewer-front product-viewer-back"),this.animating=!1},a.prototype.dragImage=function(){var e=this;e.slideShow.on("mousedown vmousedown",function(a){e.slideShow.addClass("cd-draggable");var t=e.imageWrapper.offset().left,i=e.imageWrapper.outerWidth();e.frames;e.xPosition=a.pageX,e.element.on("mousemove vmousemove",function(a){e.animating||(e.animating=!0,window.requestAnimationFrame?requestAnimationFrame(function(){e.animateDraggedImage(a,t,i)}):setTimeout(function(){e.animateDraggedImage(a,t,i)},100))}).one("mouseup vmouseup",function(a){e.slideShow.removeClass("cd-draggable"),e.element.off("mousemove vmousemove"),e.updateHandle()}),a.preventDefault()}).on("mouseup vmouseup",function(a){e.slideShow.removeClass("cd-draggable")})},a.prototype.animateDraggedImage=function(e,a,t){var i=this.xPosition-e.pageX,o=Math.ceil(100*i/(t*this.friction))*(this.frames-1)/100;o=o>0?Math.floor(o):Math.ceil(o);var n=this.visibleFrame+o;n<0?n=this.frames-1:n>this.frames-1&&(n=0),n!=this.visibleFrame&&(this.visibleFrame=n,this.updateFrame(),this.xPosition=e.pageX),this.animating=!1},a.prototype.updateHandle=function(){if(this.handle){var e=100*this.visibleFrame/this.frames;this.handle.animate({left:e+"%"},200)}},a.prototype.updateFrame=function(){var e=-100*this.visibleFrame/this.frames;t(this.slideShow,"translateX("+e+"%)")},e(".cd-product-viewer-wrapper").each(function(){new a(e(this),e(".product-view-wrap"))})});
//# sourceMappingURL=main.js.map
